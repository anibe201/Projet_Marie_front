{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\views\\User\\ResetPassword.vue?vue&type=style&index=0&id=7df54a60&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\views\\User\\ResetPassword.vue","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\css-loader\\dist\\cjs.js","mtime":1664720053256},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1664810875252},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\postcss-loader\\src\\index.js","mtime":1664720054124},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1665053229371},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1664810875252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiNsYXlvdXRBdXRoZW50aWNhdGlvbl9mb290ZXIgewogIG1hcmdpbi10b3A6IDEyMHB4Owp9Ci5lcnJvciB7CiAgY29sb3I6IHJlZDsKfQouYWJicjpob3ZlciwKLmFiYnI6YWN0aXZlIHsKICBjb2xvcjogIzRjYWY1MDsKICBjb2xvcjogIzE5Njg5YzsKfQouYWJicjphY3RpdmUsCi5hYmJyOmhvdmVyIHsKICBvdXRsaW5lLXdpZHRoOiAwOwp9Ci5sb2dvIHsKICBmb250LWZhbWlseTogZm9udGF3ZXNvbWU7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGxpbmUtaGVpZ2h0OiAxOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgZm9udC1zaXplOiAzMHB4OwogIGxldHRlci1zcGFjaW5nOiAzcHg7CiAgY29sb3I6ICMwMDAwMDA7CiAgZGlzcGxheTogYmxvY2s7CiAgdG9wOiAxN3B4Owp9Ci8vIGEgewovLyAgICAgY29sb3I6IGluaGVyaXQ7Ci8vIH0KLmFiYnIgewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CiNsYXlvdXRBdXRoZW50aWNhdGlvbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOwp9Cg=="},{"version":3,"sources":["ResetPassword.vue"],"names":[],"mappings":";AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPassword.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\n  <div>\n    <TopHeader />\n    <b-container class=\"mt-5\">\n      <b-row class=\"ml-5\">\n        <b-col cols=\"10\" md=\"8\" lg=\"6\">\n          <b-card v-if=\"!tokenValidate\">\n            <h5 class=\"text-center\"><strong>Reset your password</strong></h5>\n            <b-alert class=\"mt-4\" variant=\"warning\" show>\n              <small>\n                It looks like you clicked on an invalid password reset link.\n                <br />\n                <b-link to=\"/login\">\n                  Login here\n                  <b-icon icon=\"arrow-right\" />\n                </b-link>\n              </small>\n            </b-alert>\n          </b-card>\n\n          <b-card v-if=\"tokenValidate\" style=\"color: #001e5f\">\n            <h4 class=\"font-weight-bold\">Change password for {{ email }}</h4>\n            <b-form @submit.stop.prevent=\"passwordReset\" class=\"mt-4\">\n              <b-form-group\n                class=\"font-weight-bold\"\n                id=\"input-group-password\"\n                label=\"New password\"\n                label-for=\"input-password\"\n              >\n                <b-form-input\n                  v-model=\"newPassword\"\n                  id=\"input-password\"\n                  type=\"password\"\n                  required\n                  :state=\"newPasswordValidation\"\n                />\n                <b-form-invalid-feedback\n                  v-if=\"newPassword\"\n                  :state=\"newPasswordValidation\"\n                >\n                  Your password could be 8-32 character long, contain letters,\n                  numbers and must not contain space.\n                </b-form-invalid-feedback>\n              </b-form-group>\n\n              <b-form-group\n                class=\"font-weight-bold\"\n                id=\"input-group-2-password\"\n                label=\"Confirm password\"\n                label-for=\"input-2-password\"\n              >\n                <b-form-input\n                  v-model=\"confirmPassword\"\n                  id=\"input-2-password\"\n                  type=\"password\"\n                  required\n                  :state=\"confirmPasswordValidation\"\n                />\n                <b-form-invalid-feedback\n                  v-if=\"confirmPassword\"\n                  :state=\"confirmPasswordValidation\"\n                >\n                  Password didn't match\n                </b-form-invalid-feedback>\n              </b-form-group>\n              <b-row>\n                <b-col cols=\"6\">\n                  <b-button\n                    class=\"p-2 mt-2 font-weight-bold\"\n                    block\n                    type=\"submit\"\n                    variant=\"warning\"\n                  >\n                    Submit\n                  </b-button>\n                </b-col>\n              </b-row>\n            </b-form>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <Footer class=\"mt-5\" />\n  </div>\n</template>\n\n<script>\nimport TopHeader from \"@/components/Common/TopHeader.vue\";\nimport Footer from \"@/components/Common/Footer.vue\";\nimport AuthenticationService from \"@/services/AuthenticationService.js\";\nexport default {\n  name: \"ResetPassword\",\n  components: {\n    TopHeader,\n    Footer\n  },\n  data() {\n    return {\n      userId: null,\n      emailResetPassword: null,\n      mailSent: false,\n      name: null,\n      email: null,\n      newPassword: null,\n      formatPassword: /^[a-zA-z0-9]{8,32}$/,\n      confirmPassword: null,\n      tokenValidate: true\n    };\n  },\n  computed: {\n    newPasswordValidation() {\n      if (this.newPassword == null) return null;\n      else if (!this.formatPassword.test(this.newPassword)) return false;\n      else return true;\n    },\n    confirmPasswordValidation() {\n      if (this.confirmPassword == null) return null;\n      else if (\n        this.confirmPassword != this.newPassword ||\n        !this.formatPassword.test(this.confirmPassword)\n      )\n        return false;\n      else return true;\n    }\n  },\n  async mounted() {\n    const token = this.$route.params.token;\n    try {\n      const user = (await AuthenticationService.verifyPasswordToken(token))\n        .data;\n      this.userId = user.id;\n      this.name = user.firstName + \" \" + user.lastName;\n      this.email = user.email;\n    } catch (error) {\n      this.tokenValidate = false;\n      console.log(error.response.data.error);\n    }\n  },\n  methods: {\n    async passwordReset() {\n      if (!this.newPasswordValidation || !this.confirmPasswordValidation)\n        return;\n      try {\n        await AuthenticationService.resetPassword({\n          id: this.userId,\n          email: this.email,\n          name: this.name,\n          password: this.newPassword\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      try {\n        const response = await AuthenticationService.login({\n          email: this.email,\n          password: this.newPassword\n        });\n        this.$store.dispatch(\"CurrentUser/setToken\", response.data.token);\n        this.$store.dispatch(\"CurrentUser/setUser\", response.data.user);\n        this.$store.dispatch(\"Wishlist/setWishlist\");\n        this.$router.push({ path: \"/\" });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n#layoutAuthentication_footer {\n  margin-top: 120px;\n}\n.error {\n  color: red;\n}\n.abbr:hover,\n.abbr:active {\n  color: #4caf50;\n  color: #19689c;\n}\n.abbr:active,\n.abbr:hover {\n  outline-width: 0;\n}\n.logo {\n  font-family: fontawesome;\n  text-decoration: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-size: 30px;\n  letter-spacing: 3px;\n  color: #000000;\n  display: block;\n  top: 17px;\n}\n// a {\n//     color: inherit;\n// }\n.abbr {\n  background-color: transparent;\n}\n#layoutAuthentication {\n  background-color: rgb(255, 255, 255);\n}\n</style>\n"]}]}