{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Products\\SubCategorySidebar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Products\\SubCategorySidebar.vue","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1664810875252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCBTdWJDYXRlZ29yeVNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9TdWJDYXRlZ29yeVNlcnZpY2UuanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTdWJDYXRlZ29yeVNpZGViYXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdTdWJDYXRlZ29yeTogIiIsCiAgICAgIHNlYXJjaFBhcmFtZXRlcjoge30sCiAgICAgIHN1YkNhdGVnb3J5TGlzdDogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICBhZG1pbjogc3RhdGUgPT4gc3RhdGUuQ3VycmVudFVzZXIuYWRtaW4KICAgIH0pCiAgfSwKCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMuc2VhcmNoUGFyYW1ldGVyID0gdGhpcy4kc3RvcmUuc3RhdGUuUHJvZHVjdHMuc2VhcmNoUGFyYW1ldGVyOwogICAgdGhpcy5zdWJDYXRlZ29yeUxpc3QgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgKICAgICAgIkNhdGVnb3J5L2dldFN1YkNhdGVnb3J5TGlzdCIKICAgICk7CiAgICB0aGlzLnN1YkNhdGVnb3J5TGlzdCA9IHRoaXMuc3ViQ2F0ZWdvcnlMaXN0Lm1hcChvYmogPT4gKHsKICAgICAgLi4ub2JqLAogICAgICBtb2RlOiAwCiAgICB9KSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjcmVhdGVOZXdTdWJDYXRlZygpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBTdWJDYXRlZ29yeVNlcnZpY2UuY3JlYXRlU3ViQ2F0ZWdvcnkoewogICAgICAgICAgbmFtZTogdGhpcy5uZXdTdWJDYXRlZ29yeSwKICAgICAgICAgIENhdGVnb3J5SWQ6IHRoaXMuc2VhcmNoUGFyYW1ldGVyLmNhdGVnb3J5SWQKICAgICAgICB9KTsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiQ2F0ZWdvcnkvc2V0U3ViQ2F0ZWdvcnlMaXN0Iik7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgdXBkYXRlU3ViQ2F0ZWdvcnkoc3ViQ2F0ZWdvcnkpIHsKICAgICAgdHJ5IHsKICAgICAgICBkZWxldGUgc3ViQ2F0ZWdvcnkubW9kZTsKICAgICAgICBhd2FpdCBTdWJDYXRlZ29yeVNlcnZpY2UudXBkYXRlU3ViQ2F0ZWdvcnkoc3ViQ2F0ZWdvcnkpOwogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJDYXRlZ29yeS9zZXRTdWJDYXRlZ29yeUxpc3QiKTsKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVTdWJDYXRlZ29yeShzdWJDYXRlZ29yeSkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IFN1YkNhdGVnb3J5U2VydmljZS5kZWxldGVTdWJDYXRlZ29yeShzdWJDYXRlZ29yeS5pZCk7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIkNhdGVnb3J5L3NldFN1YkNhdGVnb3J5TGlzdCIpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["SubCategorySidebar.vue"],"names":[],"mappings":";AAmHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SubCategorySidebar.vue","sourceRoot":"src/components/Products","sourcesContent":["<template>\n  <div>\n    <ul style=\"list-style: none\">\n      <div v-for=\"subCategory in subCategoryList\" :key=\"subCategory.id\">\n        <li\n          v-if=\"searchParameter.categoryId == subCategory.CategoryId\"\n          class=\"mb-1\"\n        >\n          <b-row v-if=\"subCategory.mode == 0\">\n            <div :class=\"{ 'col-12': !admin, 'col-8': admin }\">\n              <b-link\n                variant=\"white\"\n                :to=\"`${$route.path}/${subCategory.name}`\"\n              >\n                <small>{{ subCategory.name }}</small>\n                <b-icon\n                  variant=\"primary\"\n                  icon=\"triangle-fill\"\n                  scale=\"0.5\"\n                  rotate=\"90\"\n                  shift-v=\"-2\"\n                />\n              </b-link>\n            </div>\n\n            <b-col cols=\"4\" v-if=\"admin\">\n              <b-button-toolbar>\n                <b-button-group size=\"sm\">\n                  <b-button @click=\"subCategory.mode ^= 1\" variant=\"white\">\n                    <b-icon\n                      variant=\"primary\"\n                      v-b-tooltip.hover\n                      title=\"Edit\"\n                      icon=\"pen\"\n                    />\n                  </b-button>\n\n                  <b-button\n                    @click=\"deleteSubCategory(subCategory)\"\n                    variant=\"white\"\n                  >\n                    <b-icon\n                      variant=\"danger\"\n                      v-b-tooltip.hover\n                      title=\"Delete\"\n                      icon=\"trash\"\n                    />\n                  </b-button>\n                </b-button-group>\n              </b-button-toolbar>\n            </b-col>\n          </b-row>\n          <b-form\n            v-if=\"subCategory.mode == 1\"\n            @submit.stop.prevent=\"updateSubCategory(subCategory)\"\n          >\n            <b-row>\n              <b-col cols=\"8\">\n                <b-form-group>\n                  <b-form-input\n                    size=\"sm\"\n                    required\n                    v-model=\"subCategory.name\"\n                    placeholder=\"Category Name\"\n                  />\n                </b-form-group>\n              </b-col>\n              <b-col cols=\"4\">\n                <b-button-toolbar>\n                  <b-button-group size=\"sm\">\n                    <b-button type=\"submit\" variant=\"white\">\n                      <b-icon\n                        variant=\"primary\"\n                        v-b-tooltip.hover\n                        title=\"Save\"\n                        icon=\"check2\"\n                      />\n                    </b-button>\n                    <b-button @click=\"subCategory.mode ^= 1\" variant=\"white\">\n                      <b-icon\n                        variant=\"danger\"\n                        v-b-tooltip.hover\n                        title=\"Cancel\"\n                        icon=\"x\"\n                      />\n                    </b-button>\n                  </b-button-group>\n                </b-button-toolbar>\n              </b-col>\n            </b-row>\n          </b-form>\n        </li>\n      </div>\n      <div v-if=\"admin\">\n        <b-card>\n          <b-form @submit.stop.prevent=\"createNewSubCateg\">\n            <b-form-group>\n              <b-form-input\n                size=\"sm\"\n                required\n                v-model=\"newSubCategory\"\n                placeholder=\"Category Name\"\n              />\n            </b-form-group>\n            <b-button size=\"sm\" type=\"submit\" variant=\"warning\">\n              Create\n            </b-button>\n          </b-form>\n        </b-card>\n      </div>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport SubCategoryService from \"@/services/SubCategoryService.js\";\n\nexport default {\n  name: \"SubCategorySidebar\",\n  data() {\n    return {\n      newSubCategory: \"\",\n      searchParameter: {},\n      subCategoryList: []\n    };\n  },\n  computed: {\n    ...mapState({\n      admin: state => state.CurrentUser.admin\n    })\n  },\n\n  async mounted() {\n    this.searchParameter = this.$store.state.Products.searchParameter;\n    this.subCategoryList = await this.$store.dispatch(\n      \"Category/getSubCategoryList\"\n    );\n    this.subCategoryList = this.subCategoryList.map(obj => ({\n      ...obj,\n      mode: 0\n    }));\n  },\n  methods: {\n    async createNewSubCateg() {\n      try {\n        await SubCategoryService.createSubCategory({\n          name: this.newSubCategory,\n          CategoryId: this.searchParameter.categoryId\n        });\n        await this.$store.dispatch(\"Category/setSubCategoryList\");\n        window.location.reload();\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    },\n    async updateSubCategory(subCategory) {\n      try {\n        delete subCategory.mode;\n        await SubCategoryService.updateSubCategory(subCategory);\n        await this.$store.dispatch(\"Category/setSubCategoryList\");\n        window.location.reload();\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    },\n    async deleteSubCategory(subCategory) {\n      try {\n        await SubCategoryService.deleteSubCategory(subCategory.id);\n        await this.$store.dispatch(\"Category/setSubCategoryList\");\n        window.location.reload();\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\"></style>\n"]}]}