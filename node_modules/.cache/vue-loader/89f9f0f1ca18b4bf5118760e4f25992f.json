{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue","mtime":1668170115101},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053078023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBPcmRlclNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9PcmRlclNlcnZpY2UuanMiOwppbXBvcnQgT3JkZXJJdGVtU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL09yZGVySXRlbVNlcnZpY2UuanMiOwppbXBvcnQgUHJvZHVjdHNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzIjsKCgppbXBvcnQgeyBsb2FkU3RyaXBlIH0gZnJvbSAiQHN0cmlwZS9zdHJpcGUtanMiOwpjb25zdCBzdHJpcGVJbml0ID0gbG9hZFN0cmlwZSgKICAicGtfdGVzdF81MUk0bWJpR1YzbUxBWUplUTEzQkNQdHQwYjBEV01IQUpBTGhkT2FBVnAyc0E1UDBXZ2pQY0gyMVppdzhmUXBiQm44a1pzTmdUNTEzdDdodFBDRGx3bmZ6aDAwZ2tZeWxVVjEiCik7CmltcG9ydCBDaGVja291dFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9DaGVja291dFNlcnZpY2UuanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCdXlJdGVtIiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGVyY2VudDogMCwKICAgICAgb3JkZXI6IHt9LAogICAgICBzZXNzaW9uOiB7fSwKICAgICAgdmFsaWRTZXNzaW9uOiBmYWxzZSwKICAgICAgc2Vzc2lvbklkOiBudWxsLAoKICAgICAgc2VsZWN0ZWRDdXJyZW5jeTogIkZjZmEiLAogICAgICBwYXlCdG5TcGluOiBmYWxzZSwKICAgICAgc3ViVG90YWxBbW91bnQ6IDAsCiAgICAgIGZvcm1WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbWVzc2FnZTogImZvcm0gZGF0YSBpcyBub3QgdmFsaWQiLAogICAgICBzaGlwcGluZ1JhdGU6IHRoaXMuJHN0b3JlLnN0YXRlLkNoZWNrb3V0LnNoaXBwaW5nUmF0ZSwKICAgICAgdG90YWxBbW91bnQ6IDAsCiAgICAgIGNoZWNrb3V0UHJvZHVjdDogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtb3VudGVkKCkgewogICAgdGhpcy5jaGVja291dFByb2R1Y3QgPSB0aGlzLiRzdG9yZS5zdGF0ZS5DYXJ0LmNhcnRQcm9kdWN0czsKICAgIHZhciBpOwogICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hlY2tvdXRQcm9kdWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuc3ViVG90YWxBbW91bnQgKz0KICAgICAgICB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5hbW91bnQgKiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5xdWFudGl0eTsKICAgIH0KICAgIHRoaXMudG90YWxBbW91bnQgPSB0aGlzLnN1YlRvdGFsQW1vdW50ICsgdGhpcy5zaGlwcGluZ1JhdGU7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjaGVja291dEFwcGxpZWQoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgIkNoZWNrb3V0L2luZm9ybWF0aW9uVmFsaWRhdGUiCiAgICAgICk7CiAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnBheUJ0blNwaW4gPSB0cnVlOwogICAgICBjb25zdCBjdXN0b21lck5hbWUgPSByZXNwb25zZS5uYW1lOwogICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gcmVzcG9uc2UuZW1haWw7CiAgICAgIGNvbnN0IGN1c3RvbWVyUGhvbmVObyA9IHJlc3BvbnNlLnBob25lTm87CiAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHJlc3BvbnNlLnNoaXBwaW5nQWRkcmVzczsKICAgICAgdmFyIGk7CiAgICAgIHZhciBjaGVja291dEl0ZW1zID0gW107CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoZWNrb3V0UHJvZHVjdC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICBjdXJyZW5jeTogIkZjZmEiLAogICAgICAgICAgbmFtZTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0udGl0bGUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucHJvZHVjdElkLAogICAgICAgICAgYW1vdW50OiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5hbW91bnQgKiAxMDAsCiAgICAgICAgICBxdWFudGl0eTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucXVhbnRpdHkKICAgICAgICB9OwogICAgICAgIGNoZWNrb3V0SXRlbXMucHVzaChvYmopOwogICAgICB9CiAgICAgIGNoZWNrb3V0SXRlbXMucHVzaCh7CiAgICAgICAgbmFtZTogIlNoaXBwaW5nIENvc3QiLAogICAgICAgIGFtb3VudDogdGhpcy5zaGlwcGluZ1JhdGUgKiAxMDAsCiAgICAgICAgY3VycmVuY3k6ICJGY2ZhIiwKICAgICAgICBxdWFudGl0eTogMQogICAgICB9KTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjaGVja291dFNlc3Npb24gPSAoCiAgICAgICAgICBhd2FpdCBDaGVja291dFNlcnZpY2UuY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKHsKICAgICAgICAgICAgY2hlY2tvdXRQcm9kdWN0OiBjaGVja291dEl0ZW1zLAogICAgICAgICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSwKICAgICAgICAgICAgY3VzdG9tZXJFbWFpbDogY3VzdG9tZXJFbWFpbCwKICAgICAgICAgICAgY3VzdG9tZXJQaG9uZU5vOiBjdXN0b21lclBob25lTm8sCiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzczogc2hpcHBpbmdBZGRyZXNzCiAgICAgICAgICB9KQogICAgICAgICk7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coY2hlY2tvdXRTZXNzaW9uKTsKICAgICAgICBjb25zb2xlLmxvZyhjaGVja291dFNlc3Npb24uZGF0YS5pZCk7CiAgICAgICAgY29uc3QgaWRkID0gY2hlY2tvdXRTZXNzaW9uLmRhdGEuaWQ7CiAgICAgICAgY29uc3QgcGF0aCA9IGAvc3VjY2Vzcy1wYXltZW50YDsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGF0aCAhPT0gcGF0aCkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aCwgcGFyYW1zOiB7IGlkOiBpZGQgfSB9KTsKICAgICAgICAgIC8vIHJvdXRlci5wdXNoKHsgcGF0aDogJ3JlZ2lzdGVyJywgcXVlcnk6IHsgcGxhbjogJ3ByaXZhdGUnIH19KQoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiAgICAgICAgLy8gc3RyaXBlSW5pdC50aGVuKHN0cmlwZSA9PiB7CiAgICAgICAgLy8gICBzdHJpcGUKICAgICAgICAvLyAgICAgLnJlZGlyZWN0VG9DaGVja291dCh7CiAgICAgICAgLy8gICAgICAgc2Vzc2lvbklkOiBjaGVja291dFNlc3Npb24uaWQKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgLy8gICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICB9CiAgICB9LAoKCiAgICBhc3luYyBjcmVhdGVPcmRlcigpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgIkNoZWNrb3V0L2luZm9ybWF0aW9uVmFsaWRhdGUiCiAgICAgICk7CiAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMucGF5QnRuU3BpbiA9IHRydWU7CiAgICAgIGNvbnN0IGN1c3RvbWVyTmFtZSA9IHJlc3BvbnNlLm5hbWU7CiAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSByZXNwb25zZS5lbWFpbDsKICAgICAgY29uc3QgY3VzdG9tZXJQaG9uZU5vID0gcmVzcG9uc2UucGhvbmVObzsKICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gcmVzcG9uc2Uuc2hpcHBpbmdBZGRyZXNzOwogICAgICB2YXIgaTsKICAgICAgdmFyIGNoZWNrb3V0SXRlbXMgPSBbXTsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hlY2tvdXRQcm9kdWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgIGN1cnJlbmN5OiAiRmNmYSIsCiAgICAgICAgICBuYW1lOiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS50aXRsZSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5wcm9kdWN0SWQsCiAgICAgICAgICBhbW91bnQ6IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLmFtb3VudCAqIDEwMCwKICAgICAgICAgIHF1YW50aXR5OiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5xdWFudGl0eQogICAgICAgIH07CiAgICAgICAgY2hlY2tvdXRJdGVtcy5wdXNoKG9iaik7CiAgICAgIH0KICAgICAgY2hlY2tvdXRJdGVtcy5wdXNoKHsKICAgICAgICBuYW1lOiAiU2hpcHBpbmcgQ29zdCIsCiAgICAgICAgYW1vdW50OiB0aGlzLnNoaXBwaW5nUmF0ZSAqIDEwMCwKICAgICAgICBjdXJyZW5jeTogIkZjZmEiLAogICAgICAgIHF1YW50aXR5OiAxCiAgICAgIH0pOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IGNoZWNrb3V0U2Vzc2lvbiA9ICgKICAgICAgICAgIGF3YWl0IENoZWNrb3V0U2VydmljZS5jcmVhdGVDaGVja291dFNlc3Npb24oewogICAgICAgICAgICBjaGVja291dFByb2R1Y3Q6IGNoZWNrb3V0SXRlbXMsCiAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogY3VzdG9tZXJOYW1lLAogICAgICAgICAgICBjdXN0b21lckVtYWlsOiBjdXN0b21lckVtYWlsLAogICAgICAgICAgICBjdXN0b21lclBob25lTm86IGN1c3RvbWVyUGhvbmVObywKICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgICBjb25zb2xlLmxvZyhjaGVja291dFNlc3Npb24pOwoKICAgICAgICB0aGlzLnNlc3Npb25JZCA9IGNoZWNrb3V0U2Vzc2lvbi5kYXRhLmlkOwogICAgICAgIC8vIHN0cmlwZUluaXQudGhlbihzdHJpcGUgPT4gewogICAgICAgIC8vICAgc3RyaXBlCiAgICAgICAgLy8gICAgIC5yZWRpcmVjdFRvQ2hlY2tvdXQoewogICAgICAgIC8vICAgICAgIHNlc3Npb25JZDogY2hlY2tvdXRTZXNzaW9uLmlkCiAgICAgICAgLy8gICAgIH0pCiAgICAgICAgLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLyB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgICAgICAvLyB2YXIgcHJldmlvdXNPcmRlcjsKICAgICAgICAvLyB0cnkgewogICAgICAgIC8vICAgcHJldmlvdXNPcmRlciA9IChhd2FpdCBPcmRlclNlcnZpY2UuZ2V0T3JkZXJCeVNlc3Npb25JZCh0aGlzLnNlc3Npb25JZCkpOwogICAgICAgIC8vIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGlmIChwcmV2aW91c09yZGVyID09PSAieWEgcmllbiBsZXMgY2hhbXBpIikgewogICAgICAgIC8vICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIkNhcnQvY2xlYXJDYXJ0Iik7CiAgICAgICAgLy8gfTsKICAgICAgICAKCiAgICB0cnkgewogICAgICB0aGlzLnNlc3Npb24gPSAoCiAgICAgICAgYXdhaXQgQ2hlY2tvdXRTZXJ2aWNlLnJldHJpZXZlQ2hlY2tvdXRTZXNzaW9uKHRoaXMuc2Vzc2lvbklkKQogICAgICApOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlc3Npb24pCiAgICAgIC8vIHRoaXMudmFsaWRTZXNzaW9uID0gT2JqZWN0LmtleXModGhpcy5zZXNzaW9uKS5sZW5ndGggIT0gMDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0KICAgIC8vIGlmICghdGhpcy52YWxpZFNlc3Npb24pIHJldHVybjsKCiAgICAKICAgIC8vIGNvbnN0IGxpbmVJdGVtcyA9IHRoaXMuc2Vzc2lvbi5saW5lX2l0ZW1zLmRhdGE7CiAgICAvLyBjb25zdCBzaGlwQ29zdCA9IGxpbmVJdGVtc1tsaW5lSXRlbXMubGVuZ3RoIC0gMV0uYW1vdW50X3RvdGFsOwogICAgY29uc3Qgc2hpcENvc3QgPSAwOwogICAgdHJ5IHsKICAgICAgdGhpcy5vcmRlciA9ICgKICAgICAgICBhd2FpdCBPcmRlclNlcnZpY2UuY3JlYXRlT3JkZXIoewogICAgICAgICAgbmFtZTogY3VzdG9tZXJOYW1lLAogICAgICAgICAgcGhvbmVObzogY3VzdG9tZXJQaG9uZU5vLAogICAgICAgICAgZW1haWw6IGN1c3RvbWVyRW1haWwsCiAgICAgICAgICBhZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MsCiAgICAgICAgICBzdGF0dXM6ICJwYWlkIiwKICAgICAgICAgIHZhcmlhbnQ6ICJkYXJrIiwKICAgICAgICAgIGNoZWNrb3V0U2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCwKICAgICAgICAgIC8vIHByb2R1Y3RDb3N0OiAodGhpcy5zZXNzaW9uLmFtb3VudF90b3RhbCAtIHNoaXBDb3N0KSAvIDEwMCwKICAgICAgICAgIHByb2R1Y3RDb3N0OiB0aGlzLnRvdGFsQW1vdW50LAogICAgICAgICAgLy8gY3VycmVuY3k6IHRoaXMuc2Vzc2lvbi5jdXJyZW5jeS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgY3VycmVuY3k6IHRoaXMuc2VsZWN0ZWRDdXJyZW5jeS50b1VwcGVyQ2FzZSgpLAogICAgICAgICAgLy8gc2hpcHBpbmdDb3N0OiBzaGlwQ29zdCAvIDEwMAogICAgICAgICAgc2hpcHBpbmdDb3N0OiAwCiAgICAgICAgfSkKICAgICAgKTsKICAgICAgY29uc29sZS5sb2codGhpcy5vcmRlcikKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0KCgogICAgY29uc29sZS5sb2codGhpcy5jaGVja291dFByb2R1Y3QpCiAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyLmRhdGEuaWQpOwoKICAgIHZhciBpOwogICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hlY2tvdXRQcm9kdWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHBhcnNlSW50KHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnByb2R1Y3RJZCk7CiAgICAgIGNvbnNvbGUubG9nKHBhcnNlSW50KHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnByb2R1Y3RJZCkpOwoKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBPcmRlckl0ZW1TZXJ2aWNlLmNyZWF0ZU9yZGVySXRlbSh7CiAgICAgICAgICBxdWFudGl0eTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucXVhbnRpdHksCiAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgICAgIE9yZGVySWQ6IHRoaXMub3JkZXIuZGF0YS5pZAogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgICAvLyB2YXIgbGluZXByb2R1Y3Q7CiAgICAgIC8vIHRyeSB7CiAgICAgIC8vICAgbGluZXByb2R1Y3QgPSAoYXdhaXQgUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RTYWxlcyhwcm9kdWN0SWQpKS5kYXRhOwogICAgICAvLyB9IGNhdGNoIChlcnJvcikgewogICAgICAvLyAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAvLyB9CiAgICAgIC8vIHRyeSB7CiAgICAgIC8vICAgYXdhaXQgUHJvZHVjdHNTZXJ2aWNlLnVwZGF0ZVByb2R1Y3QoewogICAgICAvLyAgICAgaWQ6IHByb2R1Y3RJZCwKICAgICAgLy8gICAgIHNhbGVzOiBsaW5lcHJvZHVjdC5zYWxlcyArIGxpbmVJdGVtc1tpXS5xdWFudGl0eQogICAgICAvLyAgIH0pOwogICAgICAvLyB9IGNhdGNoIChlcnJvcikgewogICAgICAvLyAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAvLyB9CiAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tvdXRQcm9kdWN0KTsKICAgICAgICBjb25zb2xlLmxvZyhjaGVja291dEl0ZW1zKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyLmRhdGEpOwogICAgICAgIGNvbnN0IGdsb2JhbCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInZ1ZXgiKSk7CiAgICAgICAgY29uc29sZS5sb2coZ2xvYmFsLkN1cnJlbnRVc2VyLnVzZXIpOwoKCiAgICAgIC8vIG9wZW5Mb2FkaW5nKCkgewoKICAgICAgICAgIGNvbnN0IGxvYWRpbmcgPSB0aGlzLiR2cy5sb2FkaW5nKHsKICAgICAgICAgICAgcGVyY2VudDogdGhpcy5wZXJjZW50CiAgICAgICAgICB9KQogICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLnBlcmNlbnQgPCAxMDApIHsKICAgICAgICAgICAgICAvLyBsb2FkaW5nLmNoYW5nZVBlcmNlbnQoYCR7dGhpcy5wZXJjZW50ID0gdGhpcy5wZXJjZW50ICsgMTB9JWApCiAgICAgICAgICAgICAgbG9hZGluZy5jaGFuZ2VQZXJjZW50KGAke3RoaXMucGVyY2VudCA9IHRoaXMucGVyY2VudCArIDR9JWApCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDYwKQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxMDAlIGZpbmlzaCcpOwogICAgICAgICAgICAvLyB0aGlzLlBPU1RfUFJPRFVJVCh0aGlzLmRhdGEpOwogICAgICAgICAgICBjb25zdCBmYWN0dXJlID0gewogICAgICAgICAgICAgICAgICAgIGluZm9Qcm9kdWl0OiB0aGlzLmNoZWNrb3V0UHJvZHVjdCwKICAgICAgICAgICAgICAgICAgICBlbG10MjogY2hlY2tvdXRJdGVtcywKICAgICAgICAgICAgICAgICAgICBpbmZvQ29tbWFuZGU6IHRoaXMub3JkZXIuZGF0YSwKICAgICAgICAgICAgICAgICAgICBpbmZvVXNlcjogZ2xvYmFsLkN1cnJlbnRVc2VyLnVzZXIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmYWN0dXJlKTsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVsbXRGYWN0dXJlIiwgSlNPTi5zdHJpbmdpZnkoZmFjdHVyZSkpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAvc3VjY2Vzcy1wYXltZW50YDsKICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09IHBhdGgpCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoLCBwYXJhbXM6IHsgaWQ6ICJDJ2VzdCBPSyIgfSB9KTsKCiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKQogICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKQogICAgICAgICAgICB0aGlzLnBlcmNlbnQgPSAwCiAgICAgICAgICB9LCAzMDAwKQogICAgICAgIC8vIH0KCgoKCiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["BuyItem.vue"],"names":[],"mappings":";AAkJA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA","file":"BuyItem.vue","sourceRoot":"src/components/Checkout","sourcesContent":["<template>\n  <div>\n    <b-row>\n      <b-col\n        cols=\"6\"\n        v-for=\"product in checkoutProduct\"\n        :key=\"product.productId\"\n      >\n        <b-card-group deck>\n          <b-card img-top style=\"max-width: 14rem\" class=\"mb-4\">\n            <b-card-img\n              :src=\"product.image\"\n              style=\"max-width: 14rem; max-height: 14rem\"\n              alt=\"Image non trouvée\"\n            />\n            <br />\n            <b-link :to=\"{ path: `/product/${product.productId}` }\">\n              {{ product.title }}\n            </b-link>\n            <br />\n            <small class=\"mt-2\">\n              Prix: {{ product.amount }} {{ product.currency }}\n            </small>\n            <br />\n            <small class=\"mt-2\">Quantité: {{ product.quantity }}</small>\n            <br />\n            <small class=\"mt-2\">\n              Cost: {{ product.amount * product.quantity }}\n              {{ product.currency }}\n            </small>\n          </b-card>\n        </b-card-group>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-5\">\n      <b-col cols=\"2\" />\n      <b-col cols=\"10\">\n        <b-card class=\"mt-5\" v-if=\"subTotalAmount != 0\">\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Prix</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ subTotalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Transport</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ shippingRate }}  Fcfa\n                <!-- {{ selectedCurrency }} -->\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <hr />\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Totale</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ totalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n        </b-card>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <b-alert\n          variant=\"primary\"\n          class=\"mb-0 mt-5 p-1 pl-2\"\n          :show=\"!formValidate\"\n        >\n          {{ message }}\n        </b-alert>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-4\" v-if=\"subTotalAmount != 0\">\n      <b-col cols=\"5\">\n        <b-button block variant=\"warning\" to=\"/cart-view\">Modifier le panier</b-button>\n      </b-col>\n      <b-col cols=\"2\" />\n      <b-col>\n        <b-button\n          v-if=\"!payBtnSpin\"\n          @click=\"checkoutApplied\"\n          block\n          variant=\"success\"\n        >\n          <b-icon icon=\"cursor-fill\" />\n          Payer en ligne\n        </b-button>\n\n\n\n\n\n\n\n\n\n        <!-- <b-button\n        v-if=\"!payBtnSpin\"\n        @click=\"createOrder()\"\n        block\n        variant=\"success\"\n      >\n        <b-icon icon=\"cursor-fill\" />\n        Payer à la livraison\n      </b-button> -->\n      <b-button\n        @click=\"createOrder()\"\n        block\n        variant=\"success\"\n      >\n        <b-icon icon=\"cursor-fill\" />\n        Payer à la livraison\n      </b-button>\n\n\n\n\n\n\n        <b-button v-if=\"payBtnSpin\" block variant=\"success\">\n          Processing...\n          <b-spinner small variant=\"light\"></b-spinner>\n        </b-button>\n      </b-col>\n    </b-row>\n    <b-row v-if=\"subTotalAmount == 0\">\n      <b-col class=\"text-center\">\n        <h4>Pas de produit à acheter !!!</h4>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport OrderService from \"@/services/OrderService.js\";\nimport OrderItemService from \"@/services/OrderItemService.js\";\nimport ProductsService from \"@/services/ProductsService.js\";\n\n\nimport { loadStripe } from \"@stripe/stripe-js\";\nconst stripeInit = loadStripe(\n  \"pk_test_51I4mbiGV3mLAYJeQ13BCPtt0b0DWMHAJALhdOaAVp2sA5P0WgjPcH21Ziw8fQpbBn8kZsNgT513t7htPCDlwnfzh00gkYylUV1\"\n);\nimport CheckoutService from \"@/services/CheckoutService.js\";\n\nexport default {\n  name: \"BuyItem\",\n  components: {},\n  data() {\n    return {\n      percent: 0,\n      order: {},\n      session: {},\n      validSession: false,\n      sessionId: null,\n\n      selectedCurrency: \"Fcfa\",\n      payBtnSpin: false,\n      subTotalAmount: 0,\n      formValidate: true,\n      message: \"form data is not valid\",\n      shippingRate: this.$store.state.Checkout.shippingRate,\n      totalAmount: 0,\n      checkoutProduct: null\n    };\n  },\n  computed: {},\n  mounted() {\n    this.checkoutProduct = this.$store.state.Cart.cartProducts;\n    var i;\n    for (i = 0; i < this.checkoutProduct.length; i++) {\n      this.subTotalAmount +=\n        this.checkoutProduct[i].amount * this.checkoutProduct[i].quantity;\n    }\n    this.totalAmount = this.subTotalAmount + this.shippingRate;\n  },\n  methods: {\n    async checkoutApplied() {\n      const response = await this.$store.dispatch(\n        \"Checkout/informationValidate\"\n      );\n      if (!response) {\n        this.formValidate = false;\n        return;\n      }\n      this.payBtnSpin = true;\n      const customerName = response.name;\n      const customerEmail = response.email;\n      const customerPhoneNo = response.phoneNo;\n      const shippingAddress = response.shippingAddress;\n      var i;\n      var checkoutItems = [];\n      for (i = 0; i < this.checkoutProduct.length; i++) {\n        var obj = {\n          currency: \"Fcfa\",\n          name: this.checkoutProduct[i].title,\n          description: this.checkoutProduct[i].productId,\n          amount: this.checkoutProduct[i].amount * 100,\n          quantity: this.checkoutProduct[i].quantity\n        };\n        checkoutItems.push(obj);\n      }\n      checkoutItems.push({\n        name: \"Shipping Cost\",\n        amount: this.shippingRate * 100,\n        currency: \"Fcfa\",\n        quantity: 1\n      });\n      try {\n        const checkoutSession = (\n          await CheckoutService.createCheckoutSession({\n            checkoutProduct: checkoutItems,\n            customerName: customerName,\n            customerEmail: customerEmail,\n            customerPhoneNo: customerPhoneNo,\n            shippingAddress: shippingAddress\n          })\n        );\n        // console.log(data);\n        console.log(checkoutSession);\n        console.log(checkoutSession.data.id);\n        const idd = checkoutSession.data.id;\n        const path = `/success-payment`;\n        if (this.$route.path !== path)\n          this.$router.push({ path, params: { id: idd } });\n          // router.push({ path: 'register', query: { plan: 'private' }})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        // stripeInit.then(stripe => {\n        //   stripe\n        //     .redirectToCheckout({\n        //       sessionId: checkoutSession.id\n        //     })\n        //     .catch(function(error) {\n        //       console.error(error);\n        //     });\n        // });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    },\n\n\n    async createOrder() {\n      const response =  this.$store.dispatch(\n        \"Checkout/informationValidate\"\n      );\n      if (!response) {\n          this.formValidate = false;\n        return;\n      }\n      this.payBtnSpin = true;\n      const customerName = response.name;\n      const customerEmail = response.email;\n      const customerPhoneNo = response.phoneNo;\n      const shippingAddress = response.shippingAddress;\n      var i;\n      var checkoutItems = [];\n      for (i = 0; i < this.checkoutProduct.length; i++) {\n        var obj = {\n          currency: \"Fcfa\",\n          name: this.checkoutProduct[i].title,\n          description: this.checkoutProduct[i].productId,\n          amount: this.checkoutProduct[i].amount * 100,\n          quantity: this.checkoutProduct[i].quantity\n        };\n        checkoutItems.push(obj);\n      }\n      checkoutItems.push({\n        name: \"Shipping Cost\",\n        amount: this.shippingRate * 100,\n        currency: \"Fcfa\",\n        quantity: 1\n      });\n      try {\n        const checkoutSession = (\n          await CheckoutService.createCheckoutSession({\n            checkoutProduct: checkoutItems,\n            customerName: customerName,\n            customerEmail: customerEmail,\n            customerPhoneNo: customerPhoneNo,\n            shippingAddress: shippingAddress\n          })\n        );\n        console.log(checkoutSession);\n\n        this.sessionId = checkoutSession.data.id;\n        // stripeInit.then(stripe => {\n        //   stripe\n        //     .redirectToCheckout({\n        //       sessionId: checkoutSession.id\n        //     })\n        //     .catch(function(error) {\n        //       console.error(error);\n        //     });\n        // });\n      } catch (error) {\n        console.log(error);\n      }\n        // var previousOrder;\n        // try {\n        //   previousOrder = (await OrderService.getOrderBySessionId(this.sessionId));\n        // } catch (error) {\n        //   console.log(error);\n        // }\n        // if (previousOrder === \"ya rien les champi\") {\n        //   this.$store.dispatch(\"Cart/clearCart\");\n        // };\n        \n\n    try {\n      this.session = (\n        await CheckoutService.retrieveCheckoutSession(this.sessionId)\n      );\n      console.log(this.session)\n      // this.validSession = Object.keys(this.session).length != 0;\n    } catch (error) {\n      console.log(error);\n    }\n    // if (!this.validSession) return;\n\n    \n    // const lineItems = this.session.line_items.data;\n    // const shipCost = lineItems[lineItems.length - 1].amount_total;\n    const shipCost = 0;\n    try {\n      this.order = (\n        await OrderService.createOrder({\n          name: customerName,\n          phoneNo: customerPhoneNo,\n          email: customerEmail,\n          address: shippingAddress,\n          status: \"paid\",\n          variant: \"dark\",\n          checkoutSessionId: this.sessionId,\n          // productCost: (this.session.amount_total - shipCost) / 100,\n          productCost: this.totalAmount,\n          // currency: this.session.currency.toUpperCase(),\n          currency: this.selectedCurrency.toUpperCase(),\n          // shippingCost: shipCost / 100\n          shippingCost: 0\n        })\n      );\n      console.log(this.order)\n    } catch (error) {\n      console.log(error);\n    }\n\n\n    console.log(this.checkoutProduct)\n    console.log(this.order.data.id);\n\n    var i;\n    for (i = 0; i < this.checkoutProduct.length; i++) {\n      const productId = parseInt(this.checkoutProduct[i].productId);\n      console.log(parseInt(this.checkoutProduct[i].productId));\n\n      try {\n        await OrderItemService.createOrderItem({\n          quantity: this.checkoutProduct[i].quantity,\n          ProductId: productId,\n          OrderId: this.order.data.id\n        });\n      } catch (error) {\n        console.log(error);\n      }\n      // var lineproduct;\n      // try {\n      //   lineproduct = (await ProductsService.getProductSales(productId)).data;\n      // } catch (error) {\n      //   console.log(error.response.data.error);\n      // }\n      // try {\n      //   await ProductsService.updateProduct({\n      //     id: productId,\n      //     sales: lineproduct.sales + lineItems[i].quantity\n      //   });\n      // } catch (error) {\n      //   console.log(error.response.data.error);\n      // }\n    }\n\n        console.log(this.checkoutProduct);\n        console.log(checkoutItems);\n        console.log(this.order.data);\n        const global = JSON.parse(localStorage.getItem(\"vuex\"));\n        console.log(global.CurrentUser.user);\n\n\n      // openLoading() {\n\n          const loading = this.$vs.loading({\n            percent: this.percent\n          })\n          const interval = setInterval(() => {\n            if (this.percent < 100) {\n              // loading.changePercent(`${this.percent = this.percent + 10}%`)\n              loading.changePercent(`${this.percent = this.percent + 4}%`)\n            }\n          }, 60)\n          setTimeout(() => {\n            console.log('100% finish');\n            // this.POST_PRODUIT(this.data);\n            const facture = {\n                    infoProduit: this.checkoutProduct,\n                    elmt2: checkoutItems,\n                    infoCommande: this.order.data,\n                    infoUser: global.CurrentUser.user\n                  }\n                  console.log(facture);\n                  localStorage.setItem(\"elmtFacture\", JSON.stringify(facture))\n                \n            const path = `/success-payment`;\n            if (this.$route.path !== path)\n              this.$router.push({ path, params: { id: \"C'est OK\" } });\n\n            loading.close()\n            clearInterval(interval)\n            this.percent = 0\n          }, 3000)\n        // }\n\n\n\n\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}