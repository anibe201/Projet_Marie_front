{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\views\\User\\ResetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\views\\User\\ResetPassword.vue","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1664810875252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUb3BIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL0NvbW1vbi9Ub3BIZWFkZXIudnVlIjsKaW1wb3J0IEZvb3RlciBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uL0Zvb3Rlci52dWUiOwppbXBvcnQgQXV0aGVudGljYXRpb25TZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXNldFBhc3N3b3JkIiwKICBjb21wb25lbnRzOiB7CiAgICBUb3BIZWFkZXIsCiAgICBGb290ZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VySWQ6IG51bGwsCiAgICAgIGVtYWlsUmVzZXRQYXNzd29yZDogbnVsbCwKICAgICAgbWFpbFNlbnQ6IGZhbHNlLAogICAgICBuYW1lOiBudWxsLAogICAgICBlbWFpbDogbnVsbCwKICAgICAgbmV3UGFzc3dvcmQ6IG51bGwsCiAgICAgIGZvcm1hdFBhc3N3b3JkOiAvXlthLXpBLXowLTldezgsMzJ9JC8sCiAgICAgIGNvbmZpcm1QYXNzd29yZDogbnVsbCwKICAgICAgdG9rZW5WYWxpZGF0ZTogdHJ1ZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBuZXdQYXNzd29yZFZhbGlkYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLm5ld1Bhc3N3b3JkID09IG51bGwpIHJldHVybiBudWxsOwogICAgICBlbHNlIGlmICghdGhpcy5mb3JtYXRQYXNzd29yZC50ZXN0KHRoaXMubmV3UGFzc3dvcmQpKSByZXR1cm4gZmFsc2U7CiAgICAgIGVsc2UgcmV0dXJuIHRydWU7CiAgICB9LAogICAgY29uZmlybVBhc3N3b3JkVmFsaWRhdGlvbigpIHsKICAgICAgaWYgKHRoaXMuY29uZmlybVBhc3N3b3JkID09IG51bGwpIHJldHVybiBudWxsOwogICAgICBlbHNlIGlmICgKICAgICAgICB0aGlzLmNvbmZpcm1QYXNzd29yZCAhPSB0aGlzLm5ld1Bhc3N3b3JkIHx8CiAgICAgICAgIXRoaXMuZm9ybWF0UGFzc3dvcmQudGVzdCh0aGlzLmNvbmZpcm1QYXNzd29yZCkKICAgICAgKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgZWxzZSByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBjb25zdCB0b2tlbiA9IHRoaXMuJHJvdXRlLnBhcmFtcy50b2tlbjsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHVzZXIgPSAoYXdhaXQgQXV0aGVudGljYXRpb25TZXJ2aWNlLnZlcmlmeVBhc3N3b3JkVG9rZW4odG9rZW4pKQogICAgICAgIC5kYXRhOwogICAgICB0aGlzLnVzZXJJZCA9IHVzZXIuaWQ7CiAgICAgIHRoaXMubmFtZSA9IHVzZXIuZmlyc3ROYW1lICsgIiAiICsgdXNlci5sYXN0TmFtZTsKICAgICAgdGhpcy5lbWFpbCA9IHVzZXIuZW1haWw7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB0aGlzLnRva2VuVmFsaWRhdGUgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBwYXNzd29yZFJlc2V0KCkgewogICAgICBpZiAoIXRoaXMubmV3UGFzc3dvcmRWYWxpZGF0aW9uIHx8ICF0aGlzLmNvbmZpcm1QYXNzd29yZFZhbGlkYXRpb24pCiAgICAgICAgcmV0dXJuOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IEF1dGhlbnRpY2F0aW9uU2VydmljZS5yZXNldFBhc3N3b3JkKHsKICAgICAgICAgIGlkOiB0aGlzLnVzZXJJZCwKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMubmV3UGFzc3dvcmQKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXV0aGVudGljYXRpb25TZXJ2aWNlLmxvZ2luKHsKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMubmV3UGFzc3dvcmQKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiQ3VycmVudFVzZXIvc2V0VG9rZW4iLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiQ3VycmVudFVzZXIvc2V0VXNlciIsIHJlc3BvbnNlLmRhdGEudXNlcik7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIldpc2hsaXN0L3NldFdpc2hsaXN0Iik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiLyIgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["ResetPassword.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPassword.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\n  <div>\n    <TopHeader />\n    <b-container class=\"mt-5\">\n      <b-row class=\"ml-5\">\n        <b-col cols=\"10\" md=\"8\" lg=\"6\">\n          <b-card v-if=\"!tokenValidate\">\n            <h5 class=\"text-center\"><strong>Reset your password</strong></h5>\n            <b-alert class=\"mt-4\" variant=\"warning\" show>\n              <small>\n                It looks like you clicked on an invalid password reset link.\n                <br />\n                <b-link to=\"/login\">\n                  Login here\n                  <b-icon icon=\"arrow-right\" />\n                </b-link>\n              </small>\n            </b-alert>\n          </b-card>\n\n          <b-card v-if=\"tokenValidate\" style=\"color: #001e5f\">\n            <h4 class=\"font-weight-bold\">Change password for {{ email }}</h4>\n            <b-form @submit.stop.prevent=\"passwordReset\" class=\"mt-4\">\n              <b-form-group\n                class=\"font-weight-bold\"\n                id=\"input-group-password\"\n                label=\"New password\"\n                label-for=\"input-password\"\n              >\n                <b-form-input\n                  v-model=\"newPassword\"\n                  id=\"input-password\"\n                  type=\"password\"\n                  required\n                  :state=\"newPasswordValidation\"\n                />\n                <b-form-invalid-feedback\n                  v-if=\"newPassword\"\n                  :state=\"newPasswordValidation\"\n                >\n                  Your password could be 8-32 character long, contain letters,\n                  numbers and must not contain space.\n                </b-form-invalid-feedback>\n              </b-form-group>\n\n              <b-form-group\n                class=\"font-weight-bold\"\n                id=\"input-group-2-password\"\n                label=\"Confirm password\"\n                label-for=\"input-2-password\"\n              >\n                <b-form-input\n                  v-model=\"confirmPassword\"\n                  id=\"input-2-password\"\n                  type=\"password\"\n                  required\n                  :state=\"confirmPasswordValidation\"\n                />\n                <b-form-invalid-feedback\n                  v-if=\"confirmPassword\"\n                  :state=\"confirmPasswordValidation\"\n                >\n                  Password didn't match\n                </b-form-invalid-feedback>\n              </b-form-group>\n              <b-row>\n                <b-col cols=\"6\">\n                  <b-button\n                    class=\"p-2 mt-2 font-weight-bold\"\n                    block\n                    type=\"submit\"\n                    variant=\"warning\"\n                  >\n                    Submit\n                  </b-button>\n                </b-col>\n              </b-row>\n            </b-form>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <Footer class=\"mt-5\" />\n  </div>\n</template>\n\n<script>\nimport TopHeader from \"@/components/Common/TopHeader.vue\";\nimport Footer from \"@/components/Common/Footer.vue\";\nimport AuthenticationService from \"@/services/AuthenticationService.js\";\nexport default {\n  name: \"ResetPassword\",\n  components: {\n    TopHeader,\n    Footer\n  },\n  data() {\n    return {\n      userId: null,\n      emailResetPassword: null,\n      mailSent: false,\n      name: null,\n      email: null,\n      newPassword: null,\n      formatPassword: /^[a-zA-z0-9]{8,32}$/,\n      confirmPassword: null,\n      tokenValidate: true\n    };\n  },\n  computed: {\n    newPasswordValidation() {\n      if (this.newPassword == null) return null;\n      else if (!this.formatPassword.test(this.newPassword)) return false;\n      else return true;\n    },\n    confirmPasswordValidation() {\n      if (this.confirmPassword == null) return null;\n      else if (\n        this.confirmPassword != this.newPassword ||\n        !this.formatPassword.test(this.confirmPassword)\n      )\n        return false;\n      else return true;\n    }\n  },\n  async mounted() {\n    const token = this.$route.params.token;\n    try {\n      const user = (await AuthenticationService.verifyPasswordToken(token))\n        .data;\n      this.userId = user.id;\n      this.name = user.firstName + \" \" + user.lastName;\n      this.email = user.email;\n    } catch (error) {\n      this.tokenValidate = false;\n      console.log(error.response.data.error);\n    }\n  },\n  methods: {\n    async passwordReset() {\n      if (!this.newPasswordValidation || !this.confirmPasswordValidation)\n        return;\n      try {\n        await AuthenticationService.resetPassword({\n          id: this.userId,\n          email: this.email,\n          name: this.name,\n          password: this.newPassword\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      try {\n        const response = await AuthenticationService.login({\n          email: this.email,\n          password: this.newPassword\n        });\n        this.$store.dispatch(\"CurrentUser/setToken\", response.data.token);\n        this.$store.dispatch(\"CurrentUser/setUser\", response.data.user);\n        this.$store.dispatch(\"Wishlist/setWishlist\");\n        this.$router.push({ path: \"/\" });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n#layoutAuthentication_footer {\n  margin-top: 120px;\n}\n.error {\n  color: red;\n}\n.abbr:hover,\n.abbr:active {\n  color: #4caf50;\n  color: #19689c;\n}\n.abbr:active,\n.abbr:hover {\n  outline-width: 0;\n}\n.logo {\n  font-family: fontawesome;\n  text-decoration: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-size: 30px;\n  letter-spacing: 3px;\n  color: #000000;\n  display: block;\n  top: 17px;\n}\n// a {\n//     color: inherit;\n// }\n.abbr {\n  background-color: transparent;\n}\n#layoutAuthentication {\n  background-color: rgb(255, 255, 255);\n}\n</style>\n"]}]}