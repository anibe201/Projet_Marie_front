{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\views\\Admin\\AOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\views\\Admin\\AOrders.vue","mtime":1667910994409},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053078023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBPcmRlclNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9PcmRlclNlcnZpY2UuanMiOwppbXBvcnQgQVRvcEhlYWRlciBmcm9tICJAL2NvbXBvbmVudHMvQWRtaW5zL0FUb3BIZWFkZXIudnVlIjsKaW1wb3J0IEZvb3RlciBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uL0Zvb3Rlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFPcmRlcnMiLAogIGNvbXBvbmVudHM6IHsKICAgIEFUb3BIZWFkZXIsCiAgICBGb290ZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbnlUeXBlOiB7CiAgICAgICAgbmFtZTogIkFsbCIsCiAgICAgICAgdmFyaWFudDogImRhcmsiCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkVHlwZU5hbWU6ICJBbGwiLAogICAgICBzZWxlY3RlZFR5cGVWYXJpYW50OiAiZGFyayIsCiAgICAgIG9yZGVyczogMCwKICAgICAgc2Vjb25kT3JkZXJMaXN0OiBudWxsLAogICAgICBvcmRlckxpc3Q6IG51bGwsCiAgICAgIG9yZGVyTGlzdDI6IG51bGwsCiAgICAgIG9yZGVyU3RhdHVzOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogInBhaWQiLAogICAgICAgICAgdmFyaWFudDogImRhcmsiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAicHJlcGFyaW5nIiwKICAgICAgICAgIHZhcmlhbnQ6ICJpbmZvIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIm9uIHRoZSB3YXkiLAogICAgICAgICAgdmFyaWFudDogIndhcm5pbmciCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiY29tcGxldGUiLAogICAgICAgICAgdmFyaWFudDogInN1Y2Nlc3MiCiAgICAgICAgfQogICAgICBdLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGVyUGFnZTogMjAKICAgIH07CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgdHJ5IHsKICAgICAgdGhpcy5vcmRlckxpc3QgPSAoYXdhaXQgT3JkZXJTZXJ2aWNlLmdldE9yZGVyTGlzdCgpKS5kYXRhOwogICAgICB0aGlzLm9yZGVyTGlzdDIgPSB0aGlzLm9yZGVyTGlzdC5zbGljZSgpOwogICAgICBpZiAodGhpcy5vcmRlckxpc3QyKSB7CiAgICAgICAgdGhpcy5vcmRlcnMgPSB0aGlzLm9yZGVyTGlzdDIubGVuZ3RoOwogICAgICAgIGNvbnN0IHN0YXJ0ID0gMDsKICAgICAgICB0aGlzLnNlY29uZE9yZGVyTGlzdCA9IHRoaXMub3JkZXJMaXN0Mi5zbGljZSgKICAgICAgICAgIHN0YXJ0LAogICAgICAgICAgc3RhcnQgKyB0aGlzLnBlclBhZ2UKICAgICAgICApOwogICAgICB9CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNlbGVjdFR5cGUoc3RhdHVzKSB7CiAgICAgIGlmIChzdGF0dXMubmFtZSA9PSAiQWxsIikgewogICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlTmFtZSA9IHN0YXR1cy5uYW1lOwogICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlVmFyaWFudCA9IHN0YXR1cy52YXJpYW50OwogICAgICAgIHRoaXMub3JkZXJMaXN0MiA9IHRoaXMub3JkZXJMaXN0LnNsaWNlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFR5cGVOYW1lID0gc3RhdHVzLm5hbWU7CiAgICAgICAgdGhpcy5zZWxlY3RlZFR5cGVWYXJpYW50ID0gc3RhdHVzLnZhcmlhbnQ7CiAgICAgICAgdGhpcy5vcmRlckxpc3QyID0gdGhpcy5vcmRlckxpc3QuZmlsdGVyKAogICAgICAgICAgb2JqID0+IG9iai5zdGF0dXMgPT0gc3RhdHVzLm5hbWUKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMub3JkZXJzID0gdGhpcy5vcmRlckxpc3QyLmxlbmd0aDsKICAgICAgY29uc3Qgc3RhcnQgPSAwOwogICAgICB0aGlzLnNlY29uZE9yZGVyTGlzdCA9IHRoaXMub3JkZXJMaXN0Mi5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLnBlclBhZ2UpOwogICAgfSwKICAgIGFzeW5jIHVwZGF0ZVN0YXR1cyhvcmRlciwgc3RhdHVzKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZWNvbmRPcmRlckxpc3QuZmluZEluZGV4KG9iaiA9PiBvYmouaWQgPT09IG9yZGVyLmlkKTsKICAgICAgdGhpcy5zZWNvbmRPcmRlckxpc3RbaW5kZXhdLnN0YXR1cyA9IHN0YXR1cy5uYW1lOwogICAgICB0aGlzLnNlY29uZE9yZGVyTGlzdFtpbmRleF0udmFyaWFudCA9IHN0YXR1cy52YXJpYW50OwogICAgICBhd2FpdCBPcmRlclNlcnZpY2UudXBkYXRlT3JkZXIoewogICAgICAgIGlkOiBvcmRlci5pZCwKICAgICAgICBzdGF0dXM6IHN0YXR1cy5uYW1lLAogICAgICAgIHZhcmlhbnQ6IHN0YXR1cy52YXJpYW50CiAgICAgIH0pOwogICAgfSwKICAgIHBhZ2luYXRlKGN1cnJlbnRQYWdlKSB7CiAgICAgIGNvbnN0IHN0YXJ0ID0gKGN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLnBlclBhZ2U7CiAgICAgIHRoaXMuc2Vjb25kT3JkZXJMaXN0ID0gdGhpcy5vcmRlckxpc3QyLnNsaWNlKHN0YXJ0LCBzdGFydCArIHRoaXMucGVyUGFnZSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["AOrders.vue"],"names":[],"mappings":";AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AOrders.vue","sourceRoot":"src/views/Admin","sourcesContent":["<template>\n  <div>\n    <ATopHeader></ATopHeader>\n    <b-container class=\"mt-4\">\n      <b-row>\n        <b-col class=\"text-center\">\n          <h3>Page de commande</h3>\n        </b-col>\n      </b-row>\n      <hr />\n      <div v-if=\"orders != 0\">\n        <b-row>\n          <b-col cols=\"1\" class=\"text-center\">\n            <strong>ID</strong>\n          </b-col>\n          <b-col cols=\"3\">\n            <strong>Nom</strong>\n          </b-col>\n          <b-col cols=\"3\">\n            <strong>Email</strong>\n          </b-col>\n          <b-col cols=\"2\">\n            <strong>Coût</strong>\n          </b-col>\n          <b-col cols=\"3\" class=\"text-center\">\n            <strong>Statut</strong>\n            <b-dropdown\n              size=\"sm\"\n              id=\"dropdown-left\"\n              :text=\"selectedTypeName\"\n              :variant=\"selectedTypeVariant\"\n              class=\"ml-2\"\n            >\n              <b-dropdown-item @click=\"selectType(anyType)\">\n                {{ anyType.name }}\n              </b-dropdown-item>\n              <b-dropdown-item\n                v-for=\"(status, idx) in orderStatus\"\n                :key=\"idx\"\n                @click=\"selectType(status)\"\n              >\n                {{ status.name }}\n              </b-dropdown-item>\n            </b-dropdown>\n          </b-col>\n        </b-row>\n        <hr />\n      </div>\n      <div>\n        <div v-for=\"order in secondOrderList\" :key=\"order.id\">\n          <b-row>\n            <b-col cols=\"1\" class=\"text-center\">{{ order.id }}</b-col>\n            <b-col cols=\"3\">{{ order.name }}</b-col>\n            <b-col cols=\"3\">{{ order.email }}</b-col>\n            <b-col cols=\"2\">\n              {{ order.productCost + order.shippingCost }} {{ order.currency }}\n            </b-col>\n            <b-col cols=\"3\" class=\"text-center\">\n              <b-row>\n                <b-col cols=\"7\">\n                  <b-dropdown\n                    size=\"sm\"\n                    block\n                    id=\"dropdown-left\"\n                    :text=\"order.status\"\n                    :variant=\"order.variant\"\n                  >\n                    <b-dropdown-item\n                      v-for=\"(status, idx) in orderStatus\"\n                      :key=\"idx\"\n                      @click=\"updateStatus(order, status)\"\n                    >\n                      {{ status.name }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </b-col>\n                <b-col cols=\"5\">\n                  <b-button\n                    size=\"sm\"\n                    block\n                    variant=\"warning\"\n                    :to=\"`/admin/order/${order.id}`\"\n                  >\n                    Détails\n                  </b-button>\n                </b-col>\n              </b-row>\n            </b-col>\n          </b-row>\n          <hr />\n        </div>\n      </div>\n      <div class=\"mt-5 d-flex justify-content-center\" v-if=\"orders == 0\">\n        <h3>Commande non trouvée...</h3>\n      </div>\n      <b-pagination\n        v-if=\"orders != 0\"\n        size=\"md\"\n        v-model=\"currentPage\"\n        :total-rows=\"orders\"\n        :per-page=\"perPage\"\n        @input=\"paginate(currentPage)\"\n      ></b-pagination>\n    </b-container>\n    <Footer class=\"mt-5\" />\n  </div>\n</template>\n\n<script>\nimport OrderService from \"@/services/OrderService.js\";\nimport ATopHeader from \"@/components/Admins/ATopHeader.vue\";\nimport Footer from \"@/components/Common/Footer.vue\";\nexport default {\n  name: \"AOrders\",\n  components: {\n    ATopHeader,\n    Footer\n  },\n  data() {\n    return {\n      anyType: {\n        name: \"All\",\n        variant: \"dark\"\n      },\n      selectedTypeName: \"All\",\n      selectedTypeVariant: \"dark\",\n      orders: 0,\n      secondOrderList: null,\n      orderList: null,\n      orderList2: null,\n      orderStatus: [\n        {\n          name: \"paid\",\n          variant: \"dark\"\n        },\n        {\n          name: \"preparing\",\n          variant: \"info\"\n        },\n        {\n          name: \"on the way\",\n          variant: \"warning\"\n        },\n        {\n          name: \"complete\",\n          variant: \"success\"\n        }\n      ],\n      currentPage: 1,\n      perPage: 20\n    };\n  },\n  async mounted() {\n    try {\n      this.orderList = (await OrderService.getOrderList()).data;\n      this.orderList2 = this.orderList.slice();\n      if (this.orderList2) {\n        this.orders = this.orderList2.length;\n        const start = 0;\n        this.secondOrderList = this.orderList2.slice(\n          start,\n          start + this.perPage\n        );\n      }\n    } catch (error) {\n      console.log(error.response.data.error);\n    }\n  },\n  methods: {\n    selectType(status) {\n      if (status.name == \"All\") {\n        this.selectedTypeName = status.name;\n        this.selectedTypeVariant = status.variant;\n        this.orderList2 = this.orderList.slice();\n      } else {\n        this.selectedTypeName = status.name;\n        this.selectedTypeVariant = status.variant;\n        this.orderList2 = this.orderList.filter(\n          obj => obj.status == status.name\n        );\n      }\n      this.orders = this.orderList2.length;\n      const start = 0;\n      this.secondOrderList = this.orderList2.slice(start, start + this.perPage);\n    },\n    async updateStatus(order, status) {\n      const index = this.secondOrderList.findIndex(obj => obj.id === order.id);\n      this.secondOrderList[index].status = status.name;\n      this.secondOrderList[index].variant = status.variant;\n      await OrderService.updateOrder({\n        id: order.id,\n        status: status.name,\n        variant: status.variant\n      });\n    },\n    paginate(currentPage) {\n      const start = (currentPage - 1) * this.perPage;\n      this.secondOrderList = this.orderList2.slice(start, start + this.perPage);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}