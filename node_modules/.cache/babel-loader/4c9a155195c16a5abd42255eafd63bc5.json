{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1664810875252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGxvYWRTdHJpcGUgfSBmcm9tICJAc3RyaXBlL3N0cmlwZS1qcyI7CmNvbnN0IHN0cmlwZUluaXQgPSBsb2FkU3RyaXBlKCJwa190ZXN0XzUxSTRtYmlHVjNtTEFZSmVRMTNCQ1B0dDBiMERXTUhBSkFMaGRPYUFWcDJzQTVQMFdnalBjSDIxWml3OGZRcGJCbjhrWnNOZ1Q1MTN0N2h0UENEbHduZnpoMDBna1l5bFVWMSIpOwppbXBvcnQgQ2hlY2tvdXRTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQ2hlY2tvdXRTZXJ2aWNlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCdXlJdGVtIiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRDdXJyZW5jeTogIlVTRCIsCiAgICAgIHBheUJ0blNwaW46IGZhbHNlLAogICAgICBzdWJUb3RhbEFtb3VudDogMCwKICAgICAgZm9ybVZhbGlkYXRlOiB0cnVlLAogICAgICBtZXNzYWdlOiAiZm9ybSBkYXRhIGlzIG5vdCB2YWxpZCIsCiAgICAgIHNoaXBwaW5nUmF0ZTogdGhpcy4kc3RvcmUuc3RhdGUuQ2hlY2tvdXQuc2hpcHBpbmdSYXRlLAogICAgICB0b3RhbEFtb3VudDogMCwKICAgICAgY2hlY2tvdXRQcm9kdWN0OiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNoZWNrb3V0UHJvZHVjdCA9IHRoaXMuJHN0b3JlLnN0YXRlLkNhcnQuY2FydFByb2R1Y3RzOwogICAgdmFyIGk7CiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGVja291dFByb2R1Y3QubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy5zdWJUb3RhbEFtb3VudCArPSB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5hbW91bnQgKiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5xdWFudGl0eTsKICAgIH0KICAgIHRoaXMudG90YWxBbW91bnQgPSB0aGlzLnN1YlRvdGFsQW1vdW50ICsgdGhpcy5zaGlwcGluZ1JhdGU7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjaGVja291dEFwcGxpZWQoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIkNoZWNrb3V0L2luZm9ybWF0aW9uVmFsaWRhdGUiKTsKICAgICAgaWYgKCFyZXNwb25zZSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMucGF5QnRuU3BpbiA9IHRydWU7CiAgICAgIGNvbnN0IGN1c3RvbWVyTmFtZSA9IHJlc3BvbnNlLm5hbWU7CiAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSByZXNwb25zZS5lbWFpbDsKICAgICAgY29uc3QgY3VzdG9tZXJQaG9uZU5vID0gcmVzcG9uc2UucGhvbmVObzsKICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gcmVzcG9uc2Uuc2hpcHBpbmdBZGRyZXNzOwogICAgICB2YXIgaTsKICAgICAgdmFyIGNoZWNrb3V0SXRlbXMgPSBbXTsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hlY2tvdXRQcm9kdWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgIGN1cnJlbmN5OiAiVVNEIiwKICAgICAgICAgIG5hbWU6IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnRpdGxlLAogICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnByb2R1Y3RJZCwKICAgICAgICAgIGFtb3VudDogdGhpcy5jaGVja291dFByb2R1Y3RbaV0uYW1vdW50ICogMTAwLAogICAgICAgICAgcXVhbnRpdHk6IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnF1YW50aXR5CiAgICAgICAgfTsKICAgICAgICBjaGVja291dEl0ZW1zLnB1c2gob2JqKTsKICAgICAgfQogICAgICBjaGVja291dEl0ZW1zLnB1c2goewogICAgICAgIG5hbWU6ICJTaGlwcGluZyBDb3N0IiwKICAgICAgICBhbW91bnQ6IHRoaXMuc2hpcHBpbmdSYXRlICogMTAwLAogICAgICAgIGN1cnJlbmN5OiAiVVNEIiwKICAgICAgICBxdWFudGl0eTogMQogICAgICB9KTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjaGVja291dFNlc3Npb24gPSAoYXdhaXQgQ2hlY2tvdXRTZXJ2aWNlLmNyZWF0ZUNoZWNrb3V0U2Vzc2lvbih7CiAgICAgICAgICBjaGVja291dFByb2R1Y3Q6IGNoZWNrb3V0SXRlbXMsCiAgICAgICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSwKICAgICAgICAgIGN1c3RvbWVyRW1haWw6IGN1c3RvbWVyRW1haWwsCiAgICAgICAgICBjdXN0b21lclBob25lTm86IGN1c3RvbWVyUGhvbmVObywKICAgICAgICAgIHNoaXBwaW5nQWRkcmVzczogc2hpcHBpbmdBZGRyZXNzCiAgICAgICAgfSkpLmRhdGE7CiAgICAgICAgc3RyaXBlSW5pdC50aGVuKHN0cmlwZSA9PiB7CiAgICAgICAgICBzdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KHsKICAgICAgICAgICAgc2Vzc2lvbklkOiBjaGVja291dFNlc3Npb24uaWQKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AAiHA;AACA,8BACA,8GACA;AACA;AAEA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;IACA;IACA;MACA,uBACA;IACA;IACA;EACA;EACAC;IACA;MACA,4CACA,+BACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAC;UACAd;UACAe;UACAC;UACAC;QACA;QACAC;MACA;MACAA;QACAlB;QACAgB;QACAF;QACAG;MACA;MACA;QACA,yBACA;UACAP;UACAS;UACAC;UACAC;UACAC;QACA,IACApB;QACAqB;UACAC,OACAC;YACAC;UACA,GACAC;YACAC;UACA;QACA;MACA;QACAA;MACA;IACA;EACA;AACA","names":["name","components","data","selectedCurrency","payBtnSpin","subTotalAmount","formValidate","message","shippingRate","totalAmount","checkoutProduct","computed","mounted","methods","currency","description","amount","quantity","checkoutItems","customerName","customerEmail","customerPhoneNo","shippingAddress","stripeInit","stripe","redirectToCheckout","sessionId","catch","console"],"sourceRoot":"src/components/Checkout","sources":["BuyItem.vue"],"sourcesContent":["<template>\n  <div>\n    <b-row>\n      <b-col\n        cols=\"6\"\n        v-for=\"product in checkoutProduct\"\n        :key=\"product.productId\"\n      >\n        <b-card-group deck>\n          <b-card img-top style=\"max-width: 14rem\" class=\"mb-4\">\n            <b-card-img\n              :src=\"product.image\"\n              style=\"max-width: 14rem; max-height: 14rem\"\n              alt=\"Image Not Found\"\n            />\n            <br />\n            <b-link :to=\"{ path: `/product/${product.productId}` }\">\n              {{ product.title }}\n            </b-link>\n            <br />\n            <small class=\"mt-2\">\n              Price: {{ product.amount }} {{ product.currency }}\n            </small>\n            <br />\n            <small class=\"mt-2\">Quantity: {{ product.quantity }}</small>\n            <br />\n            <small class=\"mt-2\">\n              Cost: {{ product.amount * product.quantity }}\n              {{ product.currency }}\n            </small>\n          </b-card>\n        </b-card-group>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-5\">\n      <b-col cols=\"2\" />\n      <b-col cols=\"10\">\n        <b-card class=\"mt-5\" v-if=\"subTotalAmount != 0\">\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Sub-Total</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ subTotalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Shipping Rate</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ shippingRate }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <hr />\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Total</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ totalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n        </b-card>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <b-alert\n          variant=\"primary\"\n          class=\"mb-0 mt-5 p-1 pl-2\"\n          :show=\"!formValidate\"\n        >\n          {{ message }}\n        </b-alert>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-4\" v-if=\"subTotalAmount != 0\">\n      <b-col cols=\"5\">\n        <b-button block variant=\"warning\" to=\"/cart-view\">Edit Cart</b-button>\n      </b-col>\n      <b-col cols=\"2\" />\n      <b-col>\n        <b-button\n          v-if=\"!payBtnSpin\"\n          @click=\"checkoutApplied\"\n          block\n          variant=\"success\"\n        >\n          <b-icon icon=\"cursor-fill\" />\n          Pay Now\n        </b-button>\n        <b-button v-if=\"payBtnSpin\" block variant=\"success\">\n          Processing...\n          <b-spinner small variant=\"light\"></b-spinner>\n        </b-button>\n      </b-col>\n    </b-row>\n    <b-row v-if=\"subTotalAmount == 0\">\n      <b-col class=\"text-center\">\n        <h4>No Product to Buy!!!</h4>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport { loadStripe } from \"@stripe/stripe-js\";\nconst stripeInit = loadStripe(\n  \"pk_test_51I4mbiGV3mLAYJeQ13BCPtt0b0DWMHAJALhdOaAVp2sA5P0WgjPcH21Ziw8fQpbBn8kZsNgT513t7htPCDlwnfzh00gkYylUV1\"\n);\nimport CheckoutService from \"@/services/CheckoutService.js\";\n\nexport default {\n  name: \"BuyItem\",\n  components: {},\n  data() {\n    return {\n      selectedCurrency: \"USD\",\n      payBtnSpin: false,\n      subTotalAmount: 0,\n      formValidate: true,\n      message: \"form data is not valid\",\n      shippingRate: this.$store.state.Checkout.shippingRate,\n      totalAmount: 0,\n      checkoutProduct: null\n    };\n  },\n  computed: {},\n  mounted() {\n    this.checkoutProduct = this.$store.state.Cart.cartProducts;\n    var i;\n    for (i = 0; i < this.checkoutProduct.length; i++) {\n      this.subTotalAmount +=\n        this.checkoutProduct[i].amount * this.checkoutProduct[i].quantity;\n    }\n    this.totalAmount = this.subTotalAmount + this.shippingRate;\n  },\n  methods: {\n    async checkoutApplied() {\n      const response = await this.$store.dispatch(\n        \"Checkout/informationValidate\"\n      );\n      if (!response) {\n        this.formValidate = false;\n        return;\n      }\n      this.payBtnSpin = true;\n      const customerName = response.name;\n      const customerEmail = response.email;\n      const customerPhoneNo = response.phoneNo;\n      const shippingAddress = response.shippingAddress;\n      var i;\n      var checkoutItems = [];\n      for (i = 0; i < this.checkoutProduct.length; i++) {\n        var obj = {\n          currency: \"USD\",\n          name: this.checkoutProduct[i].title,\n          description: this.checkoutProduct[i].productId,\n          amount: this.checkoutProduct[i].amount * 100,\n          quantity: this.checkoutProduct[i].quantity\n        };\n        checkoutItems.push(obj);\n      }\n      checkoutItems.push({\n        name: \"Shipping Cost\",\n        amount: this.shippingRate * 100,\n        currency: \"USD\",\n        quantity: 1\n      });\n      try {\n        const checkoutSession = (\n          await CheckoutService.createCheckoutSession({\n            checkoutProduct: checkoutItems,\n            customerName: customerName,\n            customerEmail: customerEmail,\n            customerPhoneNo: customerPhoneNo,\n            shippingAddress: shippingAddress\n          })\n        ).data;\n        stripeInit.then(stripe => {\n          stripe\n            .redirectToCheckout({\n              sessionId: checkoutSession.id\n            })\n            .catch(function(error) {\n              console.error(error);\n            });\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}