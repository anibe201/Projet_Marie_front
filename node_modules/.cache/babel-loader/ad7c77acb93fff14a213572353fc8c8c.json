{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Admins\\Order\\OrderItems.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\Admins\\Order\\OrderItems.vue","mtime":1667854802342},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053078023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBPcmRlckl0ZW1TZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvT3JkZXJJdGVtU2VydmljZS5qcyI7CmltcG9ydCBPcmRlclNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9PcmRlclNlcnZpY2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk9yZGVySXRlbXMiLAogIHByb3BzOiB7CiAgICBvcmRlckl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG9yZGVySW5mbzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3JkZXJTdGF0dXM6IHRoaXMub3JkZXJJbmZvLnN0YXR1cywKICAgICAgc3RhdHVzVmFyaWFudDogdGhpcy5vcmRlckluZm8udmFyaWFudCwKICAgICAgYWxsU3RhdHVzOiBbewogICAgICAgIG5hbWU6ICJwYWlkIiwKICAgICAgICB2YXJpYW50OiAiZGFyayIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJwcmVwYXJpbmciLAogICAgICAgIHZhcmlhbnQ6ICJpbmZvIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIm9uIHRoZSB3YXkiLAogICAgICAgIHZhcmlhbnQ6ICJ3YXJuaW5nIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogImNvbXBsZXRlIiwKICAgICAgICB2YXJpYW50OiAic3VjY2VzcyIKICAgICAgfV0KICAgIH07CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgYXN5bmMgdXBkYXRlU3RhdHVzKHN0YXR1cykgewogICAgICB0aGlzLm9yZGVyU3RhdHVzID0gc3RhdHVzLm5hbWU7CiAgICAgIHRoaXMuc3RhdHVzVmFyaWFudCA9IHN0YXR1cy52YXJpYW50OwogICAgICB0cnkgewogICAgICAgIGF3YWl0IE9yZGVyU2VydmljZS51cGRhdGVPcmRlcih7CiAgICAgICAgICBpZDogdGhpcy5vcmRlckluZm8uaWQsCiAgICAgICAgICBzdGF0dXM6IHN0YXR1cy5uYW1lLAogICAgICAgICAgdmFyaWFudDogc3RhdHVzLnZhcmlhbnQKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGRlbGV0ZU9yZGVyKCkgewogICAgICBmb3IgKHZhciBpIGluIHRoaXMub3JkZXJJdGVtcykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBPcmRlckl0ZW1TZXJ2aWNlLmRlbGV0ZU9yZGVySXRlbSh0aGlzLm9yZGVySXRlbXNbaV0uaWQpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBPcmRlclNlcnZpY2UuZGVsZXRlT3JkZXIodGhpcy5vcmRlckluZm8uaWQpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICB9CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2FkbWluL29yZGVycyIKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDoge30KfTs="},{"version":3,"mappings":";AAqFA;AACA;AACA;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;EACAC;IACA;MACAC;MACAC;MACAC,YACA;QACAV;QACAW;MACA,GACA;QACAX;QACAW;MACA,GACA;QACAX;QACAW;MACA,GACA;QACAX;QACAW;MACA;IAEA;EACA;EACAC;EACAC;IACA;MACA;MACA;MACA;QACA;UACAC;UACAC;UACAJ;QACA;MACA;QACAK;MACA;IACA;IACA;MACA;QACA;UACA;QACA;UACAA;QACA;MACA;MACA;QACA;MACA;QACAA;MACA;MACA;QAAAC;MAAA;IACA;EACA;EACAC;AACA","names":["name","props","orderItems","type","required","orderInfo","components","data","orderStatus","statusVariant","allStatus","variant","mounted","methods","id","status","console","path","computed"],"sourceRoot":"src/components/Admins/Order","sources":["OrderItems.vue"],"sourcesContent":["<template>\n  <div>\n    <b-row>\n      <b-col cols=\"6\" v-for=\"orderItem in orderItems\" :key=\"orderItem.id\">\n        <b-card-group deck>\n          <b-card img-top style=\"max-width: 14rem\" class=\"mb-4\">\n            <b-card-img\n              :src=\"orderItem.Product.image1\"\n              style=\"max-width: 14rem; max-height: 14rem\"\n              alt=\"Image non trouvée\"\n            />\n            <br />\n            <b-link :to=\"{ path: `/product/${orderItem.Product.id}` }\">\n              {{ orderItem.Product.title }}\n            </b-link>\n            <br />\n            <small class=\"mt-2\">\n              Price: {{ orderItem.Product.amount }}\n              {{ orderItem.Product.currency }}\n            </small>\n            <br />\n            <small class=\"mt-2\">Quantity: {{ orderItem.quantity }}</small>\n            <br />\n            <small class=\"mt-2\">\n              Cost: {{ orderItem.Product.amount * orderItem.quantity }}\n              {{ orderItem.Product.currency }}\n            </small>\n          </b-card>\n        </b-card-group>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <h5 class=\"font-weight-bold\">Modifier status</h5>\n        <hr />\n        <b-row>\n          <b-col cols=\"5\">\n            <b-dropdown\n              id=\"dropdown-left\"\n              :text=\"orderStatus\"\n              block\n              :variant=\"statusVariant\"\n            >\n              <b-dropdown-item\n                v-for=\"(status, idx) in allStatus\"\n                :key=\"idx\"\n                @click=\"updateStatus(status)\"\n              >\n                {{ status.name }}\n              </b-dropdown-item>\n            </b-dropdown>\n          </b-col>\n        </b-row>\n        <b-row class=\"mt-4\">\n          <b-col>\n            <h5 class=\"font-weight-bold\">Supprimer commande</h5>\n            <hr />\n            <b-row>\n              <b-col cols=\"5\">\n                <b-button block disabled variant=\"danger\">\n                  Supprimer\n                </b-button>\n              </b-col>\n            </b-row>\n            <b-row class=\"mt-2\" v-if=\"orderStatus == 'complete'\">\n              <b-col>\n                <small>\n                  Nous n'autorisons personne à supprimer des informations de commande. \n                  Si vous supprimez cette commande à partir d'ici, cette même commande\n                  peut être récupérée à partir de Stripe en utilisant l'identifiant de \n                  session de paiement donné. Nous n'avons pas encore trouvé de moyen de \n                  supprimer les informations de commande de Stripe. Si nous trouvons un \n                  moyen de résoudre ce problème, nous pouvons le mettre à jour. Jusque-là, \n                  veuillez patienter.\n                </small>\n              </b-col>\n            </b-row>\n          </b-col>\n        </b-row>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport OrderItemService from \"@/services/OrderItemService.js\";\nimport OrderService from \"@/services/OrderService.js\";\nexport default {\n  name: \"OrderItems\",\n  props: {\n    orderItems: {\n      type: Array,\n      required: true\n    },\n    orderInfo: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {},\n  data() {\n    return {\n      orderStatus: this.orderInfo.status,\n      statusVariant: this.orderInfo.variant,\n      allStatus: [\n        {\n          name: \"paid\",\n          variant: \"dark\"\n        },\n        {\n          name: \"preparing\",\n          variant: \"info\"\n        },\n        {\n          name: \"on the way\",\n          variant: \"warning\"\n        },\n        {\n          name: \"complete\",\n          variant: \"success\"\n        }\n      ]\n    };\n  },\n  mounted() {},\n  methods: {\n    async updateStatus(status) {\n      this.orderStatus = status.name;\n      this.statusVariant = status.variant;\n      try {\n        await OrderService.updateOrder({\n          id: this.orderInfo.id,\n          status: status.name,\n          variant: status.variant\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    },\n    async deleteOrder() {\n      for (var i in this.orderItems) {\n        try {\n          await OrderItemService.deleteOrderItem(this.orderItems[i].id);\n        } catch (error) {\n          console.log(error.response.data.error);\n        }\n      }\n      try {\n        await OrderService.deleteOrder(this.orderInfo.id);\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      this.$router.push({ path: \"/admin/orders\" });\n    }\n  },\n  computed: {}\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}