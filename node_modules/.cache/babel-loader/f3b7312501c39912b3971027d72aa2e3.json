{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\store\\Review.js","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\store\\Review.js","mtime":1666372807309},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFByb2R1Y3RzU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL1Byb2R1Y3RzU2VydmljZS5qcyI7CmltcG9ydCBSZXZpZXdTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvUmV2aWV3U2VydmljZS5qcyI7CmV4cG9ydCBjb25zdCBSZXZpZXdNb2R1bGUgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdHJpY3Q6IHRydWUsCiAgbXV0YXRpb25zOiB7CiAgICBET19TT01FVEhJTkcoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGFzeW5jIGNyZWF0ZVJldmlldyh7CiAgICAgIGNvbW1pdAogICAgfSwgewogICAgICByYXRpbmcsCiAgICAgIGNvbW1lbnQsCiAgICAgIHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdFJhdGluZwogICAgfSkgewogICAgICBjb21taXQoIkRPX1NPTUVUSElORyIpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IFJldmlld1NlcnZpY2UuY3JlYXRlUmV2aWV3KHsKICAgICAgICAgIHJhdGluZzogcmF0aW5nLAogICAgICAgICAgY29tbWVudDogY29tbWVudCwKICAgICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdElkCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgIH0KICAgICAgaWYgKHJhdGluZyAhPSAwKSB7CiAgICAgICAgY29uc3QgbmV3UmF0aW5nID0gKHByb2R1Y3RSYXRpbmcucGVvcGxlUmF0ZWQgKiBwcm9kdWN0UmF0aW5nLnJhdGluZyArIHJhdGluZykgLyAocHJvZHVjdFJhdGluZy5wZW9wbGVSYXRlZCArIDEpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBQcm9kdWN0c1NlcnZpY2UudXBkYXRlUHJvZHVjdCh7CiAgICAgICAgICAgIGlkOiBwcm9kdWN0SWQsCiAgICAgICAgICAgIHJhdGluZzogbmV3UmF0aW5nLAogICAgICAgICAgICBwZW9wbGVSYXRlZDogcHJvZHVjdFJhdGluZy5wZW9wbGVSYXRlZCArIDEKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB1cGRhdGVSZXZpZXcoewogICAgICBjb21taXQKICAgIH0sIHsKICAgICAgcmV2aWV3LAogICAgICBuZXdSYXRpbmcsCiAgICAgIG5ld0NvbW1lbnQKICAgIH0pIHsKICAgICAgY29tbWl0KCJET19TT01FVEhJTkciKTsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBSZXZpZXdTZXJ2aWNlLnVwZGF0ZVJldmlldyh7CiAgICAgICAgICBpZDogcmV2aWV3LmlkLAogICAgICAgICAgcmF0aW5nOiBuZXdSYXRpbmcsCiAgICAgICAgICBjb21tZW50OiBuZXdDb21tZW50LAogICAgICAgICAgcHJvZHVjdElkOiByZXZpZXcuUHJvZHVjdElkCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgIH0KICAgICAgaWYgKG5ld1JhdGluZyAhPSAwICYmIG5ld1JhdGluZyAhPSByZXZpZXcucmF0aW5nKSB7CiAgICAgICAgdmFyIG5ld1JhdGluZ1Byb2R1Y3QsIHBlb3BsZVJhdGVkOwogICAgICAgIGlmIChyZXZpZXcucmF0aW5nID09IDApIHsKICAgICAgICAgIHBlb3BsZVJhdGVkID0gcmV2aWV3LlByb2R1Y3QucGVvcGxlUmF0ZWQgKyAxOwogICAgICAgICAgbmV3UmF0aW5nUHJvZHVjdCA9IChyZXZpZXcuUHJvZHVjdC5wZW9wbGVSYXRlZCAqIHJldmlldy5Qcm9kdWN0LnJhdGluZyArIG5ld1JhdGluZykgLyBwZW9wbGVSYXRlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGVvcGxlUmF0ZWQgPSByZXZpZXcuUHJvZHVjdC5wZW9wbGVSYXRlZDsKICAgICAgICAgIG5ld1JhdGluZ1Byb2R1Y3QgPSAocmV2aWV3LlByb2R1Y3QucGVvcGxlUmF0ZWQgKiByZXZpZXcuUHJvZHVjdC5yYXRpbmcgKyBuZXdSYXRpbmcgLSByZXZpZXcucmF0aW5nKSAvIHBlb3BsZVJhdGVkOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgUHJvZHVjdHNTZXJ2aWNlLnVwZGF0ZVByb2R1Y3QoewogICAgICAgICAgICBpZDogcmV2aWV3LlByb2R1Y3RJZCwKICAgICAgICAgICAgcmF0aW5nOiBuZXdSYXRpbmdQcm9kdWN0LAogICAgICAgICAgICBwZW9wbGVSYXRlZDogcGVvcGxlUmF0ZWQKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVSZXZpZXcoewogICAgICBjb21taXQKICAgIH0sIHJldmlldykgewogICAgICBjb21taXQoIkRPX1NPTUVUSElORyIpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IFJldmlld1NlcnZpY2UuZGVsZXRlUmV2aWV3KHJldmlldy5pZCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgIH0KICAgICAgaWYgKHJldmlldy5yYXRpbmcgIT0gMCkgewogICAgICAgIHZhciBuZXdSYXRpbmdQcm9kdWN0OwogICAgICAgIGlmIChyZXZpZXcuUHJvZHVjdC5wZW9wbGVSYXRlZCA9PSAxKSB7CiAgICAgICAgICBuZXdSYXRpbmdQcm9kdWN0ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV3UmF0aW5nUHJvZHVjdCA9IChyZXZpZXcuUHJvZHVjdC5wZW9wbGVSYXRlZCAqIHJldmlldy5Qcm9kdWN0LnJhdGluZyAtIHJldmlldy5yYXRpbmcpIC8gKHJldmlldy5Qcm9kdWN0LnBlb3BsZVJhdGVkIC0gMSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBQcm9kdWN0c1NlcnZpY2UudXBkYXRlUHJvZHVjdCh7CiAgICAgICAgICAgIGlkOiByZXZpZXcuUHJvZHVjdElkLAogICAgICAgICAgICByYXRpbmc6IG5ld1JhdGluZ1Byb2R1Y3QsCiAgICAgICAgICAgIHBlb3BsZVJhdGVkOiByZXZpZXcuUHJvZHVjdC5wZW9wbGVSYXRlZCAtIDEKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["ProductsService","ReviewService","ReviewModule","namespaced","strict","mutations","DO_SOMETHING","actions","createReview","commit","rating","comment","productId","productRating","error","console","log","response","data","newRating","peopleRated","updateProduct","id","updateReview","review","newComment","ProductId","newRatingProduct","Product","deleteReview"],"sources":["C:/Users/AlexisAnohVianneyANI/Desktop/emarket-main/shop/src/store/Review.js"],"sourcesContent":["import ProductsService from \"@/services/ProductsService.js\";\nimport ReviewService from \"@/services/ReviewService.js\";\nexport const ReviewModule = {\n  namespaced: true,\n  strict: true,\n  mutations: {\n    DO_SOMETHING() {\n      return;\n    }\n  },\n  actions: {\n    async createReview(\n      { commit },\n      { rating, comment, productId, productRating }\n    ) {\n      commit(\"DO_SOMETHING\");\n      try {\n        await ReviewService.createReview({\n          rating: rating,\n          comment: comment,\n          productId: productId\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      if (rating != 0) {\n        const newRating =\n          (productRating.peopleRated * productRating.rating + rating) /\n          (productRating.peopleRated + 1);\n        try {\n          await ProductsService.updateProduct({\n            id: productId,\n            rating: newRating,\n            peopleRated: productRating.peopleRated + 1\n          });\n        } catch (error) {\n          console.log(error.response.data.error);\n        }\n      }\n    },\n    async updateReview({ commit }, { review, newRating, newComment }) {\n      commit(\"DO_SOMETHING\");\n      try {\n        await ReviewService.updateReview({\n          id: review.id,\n          rating: newRating,\n          comment: newComment,\n          productId: review.ProductId\n        });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      if (newRating != 0 && newRating != review.rating) {\n        var newRatingProduct, peopleRated;\n        if (review.rating == 0) {\n          peopleRated = review.Product.peopleRated + 1;\n          newRatingProduct =\n            (review.Product.peopleRated * review.Product.rating + newRating) /\n            peopleRated;\n        } else {\n          peopleRated = review.Product.peopleRated;\n          newRatingProduct =\n            (review.Product.peopleRated * review.Product.rating +\n              newRating -\n              review.rating) /\n            peopleRated;\n        }\n        try {\n          await ProductsService.updateProduct({\n            id: review.ProductId,\n            rating: newRatingProduct,\n            peopleRated: peopleRated\n          });\n        } catch (error) {\n          console.log(error.response.data.error);\n        }\n      }\n    },\n    async deleteReview({ commit }, review) {\n      commit(\"DO_SOMETHING\");\n      try {\n        await ReviewService.deleteReview(review.id);\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n      if (review.rating != 0) {\n        var newRatingProduct;\n        if (review.Product.peopleRated == 1) {\n          newRatingProduct = 0;\n        } else {\n          newRatingProduct =\n            (review.Product.peopleRated * review.Product.rating -\n              review.rating) /\n            (review.Product.peopleRated - 1);\n        }\n        try {\n          await ProductsService.updateProduct({\n            id: review.ProductId,\n            rating: newRatingProduct,\n            peopleRated: review.Product.peopleRated - 1\n          });\n        } catch (error) {\n          console.log(error.response.data.error);\n        }\n      }\n    }\n  }\n};\n"],"mappings":"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"}]}