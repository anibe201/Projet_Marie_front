{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\ProductDetails\\Review.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\src\\components\\ProductDetails\\Review.vue","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664810865393},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1664810865430},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664810865393},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Downloads\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1664810875252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJldmlld1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9SZXZpZXdTZXJ2aWNlLmpzIjsKaW1wb3J0IFByb2R1Y3RzU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL1Byb2R1Y3RzU2VydmljZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmV2aWV3IiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgemVyb1N0YXI6IDAsCiAgICAgIHplcm9TdGFyUGVyY2VudDogMCwKICAgICAgb25lU3RhcjogMCwKICAgICAgb25lU3RhclBlcmNlbnQ6IDAsCiAgICAgIHR3b1N0YXI6IDAsCiAgICAgIHR3b1N0YXJQZXJjZW50OiAwLAogICAgICB0aHJlZVN0YXI6IDAsCiAgICAgIHRocmVlU3RhclBlcmNlbnQ6IDAsCiAgICAgIGZvdXJTdGFyOiAwLAogICAgICBmb3VyU3RhclBlcmNlbnQ6IDAsCiAgICAgIGZpdmVTdGFyOiAwLAogICAgICBmaXZlU3RhclBlcmNlbnQ6IDAsCiAgICAgIHJhdGluZ0NvdW50OiAwLAogICAgICBhdmVyYWdlUmF0aW5nOiAwLAogICAgICBjb21tZW50Q291bnQ6IDAsCiAgICAgIGN1cnJlbnRVc2VyUmV2aWV3OiB7fSwKICAgICAgdXNlclJldmlld0ZsYWc6IGZhbHNlLAogICAgICB1c2VySWQ6IDAsCiAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgdXNlckxvZ2dlZEluOiBmYWxzZSwKICAgICAgcmF0aW5nOiAwLAogICAgICBjb21tZW50OiAiIiwKICAgICAgcmV2aWV3RWRpdGluZzoge30sCiAgICAgIGVkaXRSYXRpbmc6IDAsCiAgICAgIGVkaXRDb21tZW50OiAiIiwKICAgICAgcHJvZHVjdElkOiAwLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGVyUGFnZTogMywKICAgICAgcmV2aWV3czogMCwKICAgICAgcHJvZHVjdFJhdGluZzoge30sCiAgICAgIHJldmlld0xpc3Q6IFtdLAogICAgICByZXZpZXdMaXN0MjogW10KICAgIH07CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgdGhpcy51c2VySWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5DdXJyZW50VXNlci51c2VySWQ7CiAgICB0aGlzLmFkbWluID0gdGhpcy4kc3RvcmUuc3RhdGUuQ3VycmVudFVzZXIuYWRtaW47CiAgICB0aGlzLnVzZXJMb2dnZWRJbiA9IHRoaXMuJHN0b3JlLnN0YXRlLkN1cnJlbnRVc2VyLnVzZXJMb2dnZWRJbjsKICAgIHRoaXMucHJvZHVjdElkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLnByb2R1Y3RJZCk7CiAgICB0cnkgewogICAgICB0aGlzLnByb2R1Y3RSYXRpbmcgPSAoYXdhaXQgUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RSYXRpbmcodGhpcy5wcm9kdWN0SWQpKS5kYXRhOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICB9CiAgICB0cnkgewogICAgICB0aGlzLnJldmlld0xpc3QgPSAoYXdhaXQgUmV2aWV3U2VydmljZS5nZXRSZXZpZXdMaXN0KHRoaXMucHJvZHVjdElkKSkuZGF0YTsKICAgICAgaWYgKHRoaXMucmV2aWV3TGlzdCkgewogICAgICAgIHRoaXMucmV2aWV3cyA9IHRoaXMucmV2aWV3TGlzdC5sZW5ndGg7CiAgICAgICAgY29uc3Qgc3RhcnQgPSAwOwogICAgICAgIHRoaXMucmV2aWV3TGlzdDIgPSB0aGlzLnJldmlld0xpc3Quc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5wZXJQYWdlKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICB9CiAgICB2YXIgaTsKICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJldmlld0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHRoaXMucmV2aWV3TGlzdFtpXS5jb21tZW50ICE9ICIiKSB0aGlzLmNvbW1lbnRDb3VudCsrOwogICAgICBpZiAodGhpcy5yZXZpZXdMaXN0W2ldLnJhdGluZyA9PSAwKSB0aGlzLnplcm9TdGFyKys7ZWxzZSBpZiAodGhpcy5yZXZpZXdMaXN0W2ldLnJhdGluZyA9PSAxKSB0aGlzLm9uZVN0YXIrKztlbHNlIGlmICh0aGlzLnJldmlld0xpc3RbaV0ucmF0aW5nID09IDIpIHRoaXMudHdvU3RhcisrO2Vsc2UgaWYgKHRoaXMucmV2aWV3TGlzdFtpXS5yYXRpbmcgPT0gMykgdGhpcy50aHJlZVN0YXIrKztlbHNlIGlmICh0aGlzLnJldmlld0xpc3RbaV0ucmF0aW5nID09IDQpIHRoaXMuZm91clN0YXIrKztlbHNlIGlmICh0aGlzLnJldmlld0xpc3RbaV0ucmF0aW5nID09IDUpIHRoaXMuZml2ZVN0YXIrKzsKICAgICAgaWYgKHRoaXMucmV2aWV3TGlzdFtpXS5Vc2VySWQgPT0gdGhpcy51c2VySWQpIHRoaXMuY3VycmVudFVzZXJSZXZpZXcgPSB0aGlzLnJldmlld0xpc3RbaV07CiAgICAgIHRoaXMudXNlclJldmlld0ZsYWcgPSBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRVc2VyUmV2aWV3KS5sZW5ndGggIT0gMDsKICAgICAgaWYgKCF0aGlzLnJldmlld0xpc3RbaV0ubW9kZSkgewogICAgICAgIHRoaXMucmV2aWV3TGlzdFtpXS5tb2RlID0gMDsKICAgICAgfQogICAgfQogICAgdGhpcy5yYXRpbmdDb3VudCA9IHRoaXMub25lU3RhciArIHRoaXMudHdvU3RhciArIHRoaXMudGhyZWVTdGFyICsgdGhpcy5mb3VyU3RhciArIHRoaXMuZml2ZVN0YXI7CiAgICBpZiAodGhpcy5yYXRpbmdDb3VudCAhPSAwKSB7CiAgICAgIHRoaXMuYXZlcmFnZVJhdGluZyA9IE1hdGgucm91bmQoMTAgKiAoNSAqIHRoaXMuZml2ZVN0YXIgKyA0ICogdGhpcy5mb3VyU3RhciArIDMgKiB0aGlzLnRocmVlU3RhciArIDIgKiB0aGlzLnR3b1N0YXIgKyAxICogdGhpcy5vbmVTdGFyKSAvIHRoaXMucmF0aW5nQ291bnQpIC8gMTA7CiAgICAgIHRoaXMub25lU3RhclBlcmNlbnQgPSBNYXRoLnJvdW5kKHRoaXMub25lU3RhciAqIDEwMCAvIHRoaXMucmF0aW5nQ291bnQpOwogICAgICB0aGlzLnR3b1N0YXJQZXJjZW50ID0gTWF0aC5yb3VuZCh0aGlzLnR3b1N0YXIgKiAxMDAgLyB0aGlzLnJhdGluZ0NvdW50KTsKICAgICAgdGhpcy50aHJlZVN0YXJQZXJjZW50ID0gTWF0aC5yb3VuZCh0aGlzLnRocmVlU3RhciAqIDEwMCAvIHRoaXMucmF0aW5nQ291bnQpOwogICAgICB0aGlzLmZvdXJTdGFyUGVyY2VudCA9IE1hdGgucm91bmQodGhpcy5mb3VyU3RhciAqIDEwMCAvIHRoaXMucmF0aW5nQ291bnQpOwogICAgICB0aGlzLmZpdmVTdGFyUGVyY2VudCA9IE1hdGgucm91bmQodGhpcy5maXZlU3RhciAqIDEwMCAvIHRoaXMucmF0aW5nQ291bnQpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcGFnaW5hdGUoY3VycmVudFBhZ2UpIHsKICAgICAgY29uc3Qgc3RhcnQgPSAoY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZTsKICAgICAgdGhpcy5yZXZpZXdMaXN0MiA9IHRoaXMucmV2aWV3TGlzdC5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLnBlclBhZ2UpOwogICAgfSwKICAgIGFzeW5jIGNyZWF0ZVJldmlldygpIHsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIlJldmlldy9jcmVhdGVSZXZpZXciLCB7CiAgICAgICAgcmF0aW5nOiB0aGlzLnJhdGluZywKICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsCiAgICAgICAgcHJvZHVjdElkOiB0aGlzLnByb2R1Y3RJZCwKICAgICAgICBwcm9kdWN0UmF0aW5nOiB0aGlzLnByb2R1Y3RSYXRpbmcKICAgICAgfSk7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJQcm9kdWN0cy9zZXRBbGxCYWNrdXBQcm9kdWN0cyIpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9LAogICAgZWRpdFJldmlldyhyZXZpZXcpIHsKICAgICAgdGhpcy5lZGl0UmF0aW5nID0gcmV2aWV3LnJhdGluZzsKICAgICAgdGhpcy5lZGl0Q29tbWVudCA9IHJldmlldy5jb21tZW50OwogICAgICB0aGlzLnJldmlld0VkaXRpbmcgPSByZXZpZXc7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygiZWRpdFJldmlld01vZGFsIik7CiAgICB9LAogICAgYXN5bmMgdXBkYXRlUmV2aWV3KCkgewogICAgICB0aGlzLiRidk1vZGFsLmhpZGUoImVkaXRSZXZpZXdNb2RhbCIpOwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiUmV2aWV3L3VwZGF0ZVJldmlldyIsIHsKICAgICAgICByZXZpZXc6IHRoaXMucmV2aWV3RWRpdGluZywKICAgICAgICBuZXdSYXRpbmc6IHRoaXMuZWRpdFJhdGluZywKICAgICAgICBuZXdDb21tZW50OiB0aGlzLmVkaXRDb21tZW50CiAgICAgIH0pOwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiUHJvZHVjdHMvc2V0QWxsQmFja3VwUHJvZHVjdHMiKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZVJldmlldyhyZXZpZXcpIHsKICAgICAgaWYgKHRoaXMudXNlckxvZ2dlZEluKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIlJldmlldy9kZWxldGVSZXZpZXciLCByZXZpZXcpOwogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJQcm9kdWN0cy9zZXRBbGxCYWNrdXBQcm9kdWN0cyIpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":"AAuUA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;IACA;IACA;IACA;IACA;IACA;MACA,sBACA,wDACAhC;IACA;MACAiC;IACA;IACA;MACA,mBACA,mDACAjC;MACA;QACA;QACA;QACA;MACA;IACA;MACAiC;IACA;IACA;IACA;MACA;MACA,yDACA,wDACA,wDACA,0DACA,yDACA;MAEA,8CACA;MACA;MACA;QACA;MACA;IACA;IACA,mBACA,eACA,eACA,iBACA,gBACA;IACA;MACA,qBACAC,WACA,MACA,oBACA,oBACA,qBACA,mBACA,oBACA,iBACA;MACA;MACA;MACA,mCACA,wCACA;MACA,kCACA,uCACA;MACA,kCACA,uCACA;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACA;MACA;QACAf;QACAC;QACAI;QACAI;MACA;MACA;MACAO;IACA;IAEAC;MACA;MACA;MACA;MACA;IACA;IACA;MACA;MACA;QACAC;QACAC;QACAC;MACA;MACA;MACAJ;IACA;IAEA;MACA;QACA;QACA;QACAA;MACA;IACA;EACA;AACA","names":["name","components","data","zeroStar","zeroStarPercent","oneStar","oneStarPercent","twoStar","twoStarPercent","threeStar","threeStarPercent","fourStar","fourStarPercent","fiveStar","fiveStarPercent","ratingCount","averageRating","commentCount","currentUserReview","userReviewFlag","userId","admin","userLoggedIn","rating","comment","reviewEditing","editRating","editComment","productId","currentPage","perPage","reviews","productRating","reviewList","reviewList2","console","Math","methods","paginate","window","editReview","review","newRating","newComment"],"sourceRoot":"src/components/ProductDetails","sources":["Review.vue"],"sourcesContent":["<template>\n  <div>\n    <b-row align-v=\"center\">\n      <b-col />\n      <b-col cols=\"4\" class=\"text-center\">\n        <b-card class=\"py-4\">\n          <br />\n          <strong>\n            <span>{{ averageRating }}</span>\n            <span>/5</span>\n          </strong>\n          <b-row class=\"mt-2\">\n            <b-col cols=\"2\" />\n            <b-col cols=\"8\">\n              <b-form-rating\n                readonly\n                :value=\"averageRating\"\n                variant=\"primary\"\n              />\n            </b-col>\n            <b-col cols=\"2\" />\n          </b-row>\n          <h6 class=\"mt-2\">\n            {{ ratingCount }}\n            {{ ratingCount >= 1 ? \"rating\" : \"ratings\" }} &amp;\n            {{ commentCount }} {{ commentCount >= 1 ? \"comment\" : \"comments\" }}\n          </h6>\n          <br />\n        </b-card>\n      </b-col>\n      <b-col cols=\"4\" class=\"justify-content-center\">\n        <b-row align-v=\"center\" class=\"my-2\">\n          <b-col cols=\"2\">\n            <small>5 star</small>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-progress variant=\"primary\">\n              <b-progress-bar\n                :value=\"fiveStarPercent\"\n                :label=\"`${fiveStar}`\"\n              ></b-progress-bar>\n            </b-progress>\n          </b-col>\n          <b-col cols=\"3\">\n            <small\n              >{{ fiveStarPercent }} <b-icon icon=\"percent\"></b-icon\n            ></small>\n          </b-col>\n        </b-row>\n\n        <b-row align-v=\"center\" class=\"my-2\">\n          <b-col cols=\"2\">\n            <small>4 star</small>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-progress variant=\"primary\">\n              <b-progress-bar\n                :value=\"fourStarPercent\"\n                :label=\"`${fourStar}`\"\n              ></b-progress-bar>\n            </b-progress>\n          </b-col>\n          <b-col cols=\"3\">\n            <small>\n              {{ fourStarPercent }}\n              <b-icon icon=\"percent\"></b-icon>\n            </small>\n          </b-col>\n        </b-row>\n\n        <b-row align-v=\"center\" class=\"my-2\">\n          <b-col cols=\"2\">\n            <small>3 star</small>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-progress variant=\"primary\">\n              <b-progress-bar\n                :value=\"threeStarPercent\"\n                :label=\"`${threeStar}`\"\n              ></b-progress-bar>\n            </b-progress>\n          </b-col>\n          <b-col cols=\"3\">\n            <small\n              >{{ threeStarPercent }} <b-icon icon=\"percent\"></b-icon\n            ></small>\n          </b-col>\n        </b-row>\n\n        <b-row align-v=\"center\" class=\"my-2\">\n          <b-col cols=\"2\">\n            <small>2 star</small>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-progress variant=\"primary\">\n              <b-progress-bar\n                :value=\"twoStarPercent\"\n                :label=\"`${twoStar}`\"\n              ></b-progress-bar>\n            </b-progress>\n          </b-col>\n          <b-col cols=\"3\">\n            <small>{{ twoStarPercent }} <b-icon icon=\"percent\"></b-icon></small>\n          </b-col>\n        </b-row>\n\n        <b-row align-v=\"center\" class=\"my-2\">\n          <b-col cols=\"2\">\n            <small>1 star</small>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-progress variant=\"primary\">\n              <b-progress-bar\n                :value=\"oneStarPercent\"\n                :label=\"`${oneStar}`\"\n              ></b-progress-bar>\n            </b-progress>\n          </b-col>\n          <b-col cols=\"3\">\n            <small>{{ oneStarPercent }} <b-icon icon=\"percent\"></b-icon></small>\n          </b-col>\n        </b-row>\n      </b-col>\n      <b-col />\n    </b-row>\n\n    <hr />\n    <b-row>\n      <b-col cols=\"6\">\n        <h4>Customer Review</h4>\n        <hr />\n        <div v-for=\"review in reviewList2\" :key=\"review.id\" class=\"mb-2\">\n          <b-card\n            bg-variant=\"white\"\n            text-variant=\"dark\"\n            v-if=\"review.comment != null && review.UserId != userId\"\n          >\n            <b-row>\n              <b-col cols=\"3\">\n                <b-img\n                  :src=\"review.User.profileImage\"\n                  height=\"60px\"\n                  width=\"60px\"\n                />\n                <div class=\"mt-3\">\n                  <b-link>\n                    {{ review.User.firstName + \" \" + review.User.lastName }}\n                  </b-link>\n                </div>\n              </b-col>\n              <b-col cols=\"9\">\n                <b-row>\n                  <b-col cols=\"7\">\n                    <b-form-rating\n                      readonly\n                      :value=\"review.rating\"\n                      variant=\"primary\"\n                    />\n                  </b-col>\n                </b-row>\n                <b-row class=\"mt-2\">\n                  <b-col>\n                    <p>{{ review.comment }}</p>\n                  </b-col>\n                </b-row>\n                <b-row>\n                  <b-col>\n                    <small class=\"mr-2\">\n                      <b-link\n                        v-if=\"userId == review.UserId\"\n                        @click=\"editReview(review)\"\n                      >\n                        edit\n                      </b-link>\n                    </small>\n                    <small>\n                      <b-link\n                        v-if=\"userId == review.UserId || admin\"\n                        @click=\"deleteReview(review)\"\n                      >\n                        delete\n                      </b-link>\n                    </small>\n                  </b-col>\n                </b-row>\n              </b-col>\n            </b-row>\n          </b-card>\n        </div>\n        <b-pagination\n          v-if=\"reviews > perPage\"\n          size=\"md\"\n          v-model=\"currentPage\"\n          :total-rows=\"reviews\"\n          :per-page=\"perPage\"\n          @input=\"paginate(currentPage)\"\n        ></b-pagination>\n      </b-col>\n      <b-col cols=\"6\">\n        <b-card bg-variant=\"white\" text-variant=\"dark\" v-if=\"userReviewFlag\">\n          <b-card-title> Your Review </b-card-title>\n          <b-row>\n            <b-col cols=\"4\">\n              <b-img\n                :src=\"currentUserReview.User.profileImage\"\n                height=\"90px\"\n                width=\"90px\"\n              />\n              <div class=\"mt-2\">\n                <b-link>\n                  {{\n                    currentUserReview.User.firstName +\n                      \" \" +\n                      currentUserReview.User.lastName\n                  }}\n                </b-link>\n              </div>\n            </b-col>\n            <b-col cols=\"8\">\n              <b-row>\n                <b-col cols=\"7\">\n                  <b-form-rating\n                    readonly\n                    :value=\"currentUserReview.rating\"\n                    variant=\"primary\"\n                  />\n                </b-col>\n              </b-row>\n              <b-row class=\"mt-2\">\n                <b-col>\n                  <p>{{ currentUserReview.comment }}</p>\n                </b-col>\n              </b-row>\n              <b-row>\n                <b-col>\n                  <small class=\"mr-2\">\n                    <b-link @click=\"editReview(currentUserReview)\">\n                      edit\n                    </b-link>\n                  </small>\n                  <small>\n                    <b-link @click=\"deleteReview(currentUserReview)\">\n                      delete\n                    </b-link>\n                  </small>\n                </b-col>\n              </b-row>\n            </b-col>\n          </b-row>\n        </b-card>\n        <b-card v-if=\"!userReviewFlag\">\n          <div class=\"mt-2 ml-3\">\n            <a variant=\"primary\">\n              <b-icon-pen />&nbsp;<strong>Write a review</strong>\n            </a>\n          </div>\n          <hr />\n          <b-form v-if=\"userLoggedIn\" @submit.stop.prevent=\"createReview\">\n            <b-row>\n              <b-col cols=\"5\">\n                <h6>Rating</h6>\n                <b-form-rating v-model=\"rating\" variant=\"primary\" />\n              </b-col>\n            </b-row>\n            <div class=\"mt-4\">\n              Comment\n            </div>\n            <b-form-group>\n              <b-form-textarea\n                required\n                v-model=\"comment\"\n                placeholder=\"Write a review\"\n                rows=\"3\"\n                max-rows=\"8\"\n              />\n            </b-form-group>\n            <b-button variant=\"primary\" type=\"submit\">\n              Submit\n            </b-button>\n          </b-form>\n          <div v-if=\"!userLoggedIn\">\n            You'll not be able to write a review until you're logged in.\n            <b-row>\n              <b-col>\n                <b-button to=\"/login\" class=\"mt-3\" variant=\"outline-dark\">\n                  Login\n                </b-button>\n              </b-col>\n            </b-row>\n          </div>\n        </b-card>\n      </b-col>\n    </b-row>\n    <b-modal\n      v-if=\"userLoggedIn\"\n      hide-footer\n      id=\"editReviewModal\"\n      title=\"Write a review\"\n    >\n      <b-form @submit.stop.prevent=\"updateReview\">\n        <b-row>\n          <b-col cols=\"5\">\n            <h6>Rating</h6>\n            <b-form-rating v-model=\"editRating\" variant=\"primary\" />\n          </b-col>\n        </b-row>\n        <div class=\"mt-4\">\n          Comment\n        </div>\n        <b-form-group>\n          <b-form-textarea\n            v-model=\"editComment\"\n            placeholder=\"Write a review\"\n            rows=\"3\"\n            required\n            max-rows=\"10\"\n          />\n        </b-form-group>\n        <b-button type=\"submit\" variant=\"primary\">\n          Submit\n        </b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport ReviewService from \"@/services/ReviewService.js\";\nimport ProductsService from \"@/services/ProductsService.js\";\nexport default {\n  name: \"Review\",\n  components: {},\n  data() {\n    return {\n      zeroStar: 0,\n      zeroStarPercent: 0,\n      oneStar: 0,\n      oneStarPercent: 0,\n      twoStar: 0,\n      twoStarPercent: 0,\n      threeStar: 0,\n      threeStarPercent: 0,\n      fourStar: 0,\n      fourStarPercent: 0,\n      fiveStar: 0,\n      fiveStarPercent: 0,\n      ratingCount: 0,\n      averageRating: 0,\n      commentCount: 0,\n      currentUserReview: {},\n      userReviewFlag: false,\n      userId: 0,\n      admin: false,\n      userLoggedIn: false,\n      rating: 0,\n      comment: \"\",\n      reviewEditing: {},\n      editRating: 0,\n      editComment: \"\",\n      productId: 0,\n      currentPage: 1,\n      perPage: 3,\n      reviews: 0,\n      productRating: {},\n      reviewList: [],\n      reviewList2: []\n    };\n  },\n  async mounted() {\n    this.userId = this.$store.state.CurrentUser.userId;\n    this.admin = this.$store.state.CurrentUser.admin;\n    this.userLoggedIn = this.$store.state.CurrentUser.userLoggedIn;\n    this.productId = parseInt(this.$route.params.productId);\n    try {\n      this.productRating = (\n        await ProductsService.getProductRating(this.productId)\n      ).data;\n    } catch (error) {\n      console.log(error.response.data.error);\n    }\n    try {\n      this.reviewList = (\n        await ReviewService.getReviewList(this.productId)\n      ).data;\n      if (this.reviewList) {\n        this.reviews = this.reviewList.length;\n        const start = 0;\n        this.reviewList2 = this.reviewList.slice(start, start + this.perPage);\n      }\n    } catch (error) {\n      console.log(error.response.data.error);\n    }\n    var i;\n    for (i = 0; i < this.reviewList.length; i++) {\n      if (this.reviewList[i].comment != \"\") this.commentCount++;\n      if (this.reviewList[i].rating == 0) this.zeroStar++;\n      else if (this.reviewList[i].rating == 1) this.oneStar++;\n      else if (this.reviewList[i].rating == 2) this.twoStar++;\n      else if (this.reviewList[i].rating == 3) this.threeStar++;\n      else if (this.reviewList[i].rating == 4) this.fourStar++;\n      else if (this.reviewList[i].rating == 5) this.fiveStar++;\n\n      if (this.reviewList[i].UserId == this.userId)\n        this.currentUserReview = this.reviewList[i];\n      this.userReviewFlag = Object.keys(this.currentUserReview).length != 0;\n      if (!this.reviewList[i].mode) {\n        this.reviewList[i].mode = 0;\n      }\n    }\n    this.ratingCount =\n      this.oneStar +\n      this.twoStar +\n      this.threeStar +\n      this.fourStar +\n      this.fiveStar;\n    if (this.ratingCount != 0) {\n      this.averageRating =\n        Math.round(\n          (10 *\n            (5 * this.fiveStar +\n              4 * this.fourStar +\n              3 * this.threeStar +\n              2 * this.twoStar +\n              1 * this.oneStar)) /\n            this.ratingCount\n        ) / 10;\n      this.oneStarPercent = Math.round((this.oneStar * 100) / this.ratingCount);\n      this.twoStarPercent = Math.round((this.twoStar * 100) / this.ratingCount);\n      this.threeStarPercent = Math.round(\n        (this.threeStar * 100) / this.ratingCount\n      );\n      this.fourStarPercent = Math.round(\n        (this.fourStar * 100) / this.ratingCount\n      );\n      this.fiveStarPercent = Math.round(\n        (this.fiveStar * 100) / this.ratingCount\n      );\n    }\n  },\n  methods: {\n    paginate(currentPage) {\n      const start = (currentPage - 1) * this.perPage;\n      this.reviewList2 = this.reviewList.slice(start, start + this.perPage);\n    },\n    async createReview() {\n      await this.$store.dispatch(\"Review/createReview\", {\n        rating: this.rating,\n        comment: this.comment,\n        productId: this.productId,\n        productRating: this.productRating\n      });\n      await this.$store.dispatch(\"Products/setAllBackupProducts\");\n      window.location.reload();\n    },\n\n    editReview(review) {\n      this.editRating = review.rating;\n      this.editComment = review.comment;\n      this.reviewEditing = review;\n      this.$bvModal.show(\"editReviewModal\");\n    },\n    async updateReview() {\n      this.$bvModal.hide(\"editReviewModal\");\n      await this.$store.dispatch(\"Review/updateReview\", {\n        review: this.reviewEditing,\n        newRating: this.editRating,\n        newComment: this.editComment\n      });\n      await this.$store.dispatch(\"Products/setAllBackupProducts\");\n      window.location.reload();\n    },\n\n    async deleteReview(review) {\n      if (this.userLoggedIn) {\n        await this.$store.dispatch(\"Review/deleteReview\", review);\n        await this.$store.dispatch(\"Products/setAllBackupProducts\");\n        window.location.reload();\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}