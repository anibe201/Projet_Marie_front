{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\views\\Admin\\AOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\views\\Admin\\AOrders.vue","mtime":1667910994409},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053078023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE9yZGVyU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL09yZGVyU2VydmljZS5qcyI7CmltcG9ydCBBVG9wSGVhZGVyIGZyb20gIkAvY29tcG9uZW50cy9BZG1pbnMvQVRvcEhlYWRlci52dWUiOwppbXBvcnQgRm9vdGVyIGZyb20gIkAvY29tcG9uZW50cy9Db21tb24vRm9vdGVyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQU9yZGVycyIsCiAgY29tcG9uZW50czogewogICAgQVRvcEhlYWRlciwKICAgIEZvb3RlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFueVR5cGU6IHsKICAgICAgICBuYW1lOiAiQWxsIiwKICAgICAgICB2YXJpYW50OiAiZGFyayIKICAgICAgfSwKICAgICAgc2VsZWN0ZWRUeXBlTmFtZTogIkFsbCIsCiAgICAgIHNlbGVjdGVkVHlwZVZhcmlhbnQ6ICJkYXJrIiwKICAgICAgb3JkZXJzOiAwLAogICAgICBzZWNvbmRPcmRlckxpc3Q6IG51bGwsCiAgICAgIG9yZGVyTGlzdDogbnVsbCwKICAgICAgb3JkZXJMaXN0MjogbnVsbCwKICAgICAgb3JkZXJTdGF0dXM6IFt7CiAgICAgICAgbmFtZTogInBhaWQiLAogICAgICAgIHZhcmlhbnQ6ICJkYXJrIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogInByZXBhcmluZyIsCiAgICAgICAgdmFyaWFudDogImluZm8iCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAib24gdGhlIHdheSIsCiAgICAgICAgdmFyaWFudDogIndhcm5pbmciCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiY29tcGxldGUiLAogICAgICAgIHZhcmlhbnQ6ICJzdWNjZXNzIgogICAgICB9XSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDIwCiAgICB9OwogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRyeSB7CiAgICAgIHRoaXMub3JkZXJMaXN0ID0gKGF3YWl0IE9yZGVyU2VydmljZS5nZXRPcmRlckxpc3QoKSkuZGF0YTsKICAgICAgdGhpcy5vcmRlckxpc3QyID0gdGhpcy5vcmRlckxpc3Quc2xpY2UoKTsKICAgICAgaWYgKHRoaXMub3JkZXJMaXN0MikgewogICAgICAgIHRoaXMub3JkZXJzID0gdGhpcy5vcmRlckxpc3QyLmxlbmd0aDsKICAgICAgICBjb25zdCBzdGFydCA9IDA7CiAgICAgICAgdGhpcy5zZWNvbmRPcmRlckxpc3QgPSB0aGlzLm9yZGVyTGlzdDIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5wZXJQYWdlKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY3RUeXBlKHN0YXR1cykgewogICAgICBpZiAoc3RhdHVzLm5hbWUgPT0gIkFsbCIpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkVHlwZU5hbWUgPSBzdGF0dXMubmFtZTsKICAgICAgICB0aGlzLnNlbGVjdGVkVHlwZVZhcmlhbnQgPSBzdGF0dXMudmFyaWFudDsKICAgICAgICB0aGlzLm9yZGVyTGlzdDIgPSB0aGlzLm9yZGVyTGlzdC5zbGljZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlTmFtZSA9IHN0YXR1cy5uYW1lOwogICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlVmFyaWFudCA9IHN0YXR1cy52YXJpYW50OwogICAgICAgIHRoaXMub3JkZXJMaXN0MiA9IHRoaXMub3JkZXJMaXN0LmZpbHRlcihvYmogPT4gb2JqLnN0YXR1cyA9PSBzdGF0dXMubmFtZSk7CiAgICAgIH0KICAgICAgdGhpcy5vcmRlcnMgPSB0aGlzLm9yZGVyTGlzdDIubGVuZ3RoOwogICAgICBjb25zdCBzdGFydCA9IDA7CiAgICAgIHRoaXMuc2Vjb25kT3JkZXJMaXN0ID0gdGhpcy5vcmRlckxpc3QyLnNsaWNlKHN0YXJ0LCBzdGFydCArIHRoaXMucGVyUGFnZSk7CiAgICB9LAogICAgYXN5bmMgdXBkYXRlU3RhdHVzKG9yZGVyLCBzdGF0dXMpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNlY29uZE9yZGVyTGlzdC5maW5kSW5kZXgob2JqID0+IG9iai5pZCA9PT0gb3JkZXIuaWQpOwogICAgICB0aGlzLnNlY29uZE9yZGVyTGlzdFtpbmRleF0uc3RhdHVzID0gc3RhdHVzLm5hbWU7CiAgICAgIHRoaXMuc2Vjb25kT3JkZXJMaXN0W2luZGV4XS52YXJpYW50ID0gc3RhdHVzLnZhcmlhbnQ7CiAgICAgIGF3YWl0IE9yZGVyU2VydmljZS51cGRhdGVPcmRlcih7CiAgICAgICAgaWQ6IG9yZGVyLmlkLAogICAgICAgIHN0YXR1czogc3RhdHVzLm5hbWUsCiAgICAgICAgdmFyaWFudDogc3RhdHVzLnZhcmlhbnQKICAgICAgfSk7CiAgICB9LAogICAgcGFnaW5hdGUoY3VycmVudFBhZ2UpIHsKICAgICAgY29uc3Qgc3RhcnQgPSAoY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGVyUGFnZTsKICAgICAgdGhpcy5zZWNvbmRPcmRlckxpc3QgPSB0aGlzLm9yZGVyTGlzdDIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5wZXJQYWdlKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"AA6GA;AACA;AACA;AACA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;QACAL;QACAM;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,cACA;QACAb;QACAM;MACA,GACA;QACAN;QACAM;MACA,GACA;QACAN;QACAM;MACA,GACA;QACAN;QACAM;MACA,EACA;MACAQ;MACAC;IACA;EACA;EACA;IACA;MACA;MACA;MACA;QACA;QACA;QACA,6CACAC,OACAA,qBACA;MACA;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA,wCACAC,iCACA;MACA;MACA;MACA;MACA;IACA;IACA;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAhB;MACA;IACA;IACAiB;MACA;MACA;IACA;EACA;AACA","names":["name","components","ATopHeader","Footer","data","anyType","variant","selectedTypeName","selectedTypeVariant","orders","secondOrderList","orderList","orderList2","orderStatus","currentPage","perPage","start","console","methods","selectType","obj","id","status","paginate"],"sourceRoot":"src/views/Admin","sources":["AOrders.vue"],"sourcesContent":["<template>\n  <div>\n    <ATopHeader></ATopHeader>\n    <b-container class=\"mt-4\">\n      <b-row>\n        <b-col class=\"text-center\">\n          <h3>Page de commande</h3>\n        </b-col>\n      </b-row>\n      <hr />\n      <div v-if=\"orders != 0\">\n        <b-row>\n          <b-col cols=\"1\" class=\"text-center\">\n            <strong>ID</strong>\n          </b-col>\n          <b-col cols=\"3\">\n            <strong>Nom</strong>\n          </b-col>\n          <b-col cols=\"3\">\n            <strong>Email</strong>\n          </b-col>\n          <b-col cols=\"2\">\n            <strong>Coût</strong>\n          </b-col>\n          <b-col cols=\"3\" class=\"text-center\">\n            <strong>Statut</strong>\n            <b-dropdown\n              size=\"sm\"\n              id=\"dropdown-left\"\n              :text=\"selectedTypeName\"\n              :variant=\"selectedTypeVariant\"\n              class=\"ml-2\"\n            >\n              <b-dropdown-item @click=\"selectType(anyType)\">\n                {{ anyType.name }}\n              </b-dropdown-item>\n              <b-dropdown-item\n                v-for=\"(status, idx) in orderStatus\"\n                :key=\"idx\"\n                @click=\"selectType(status)\"\n              >\n                {{ status.name }}\n              </b-dropdown-item>\n            </b-dropdown>\n          </b-col>\n        </b-row>\n        <hr />\n      </div>\n      <div>\n        <div v-for=\"order in secondOrderList\" :key=\"order.id\">\n          <b-row>\n            <b-col cols=\"1\" class=\"text-center\">{{ order.id }}</b-col>\n            <b-col cols=\"3\">{{ order.name }}</b-col>\n            <b-col cols=\"3\">{{ order.email }}</b-col>\n            <b-col cols=\"2\">\n              {{ order.productCost + order.shippingCost }} {{ order.currency }}\n            </b-col>\n            <b-col cols=\"3\" class=\"text-center\">\n              <b-row>\n                <b-col cols=\"7\">\n                  <b-dropdown\n                    size=\"sm\"\n                    block\n                    id=\"dropdown-left\"\n                    :text=\"order.status\"\n                    :variant=\"order.variant\"\n                  >\n                    <b-dropdown-item\n                      v-for=\"(status, idx) in orderStatus\"\n                      :key=\"idx\"\n                      @click=\"updateStatus(order, status)\"\n                    >\n                      {{ status.name }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </b-col>\n                <b-col cols=\"5\">\n                  <b-button\n                    size=\"sm\"\n                    block\n                    variant=\"warning\"\n                    :to=\"`/admin/order/${order.id}`\"\n                  >\n                    Détails\n                  </b-button>\n                </b-col>\n              </b-row>\n            </b-col>\n          </b-row>\n          <hr />\n        </div>\n      </div>\n      <div class=\"mt-5 d-flex justify-content-center\" v-if=\"orders == 0\">\n        <h3>Commande non trouvée...</h3>\n      </div>\n      <b-pagination\n        v-if=\"orders != 0\"\n        size=\"md\"\n        v-model=\"currentPage\"\n        :total-rows=\"orders\"\n        :per-page=\"perPage\"\n        @input=\"paginate(currentPage)\"\n      ></b-pagination>\n    </b-container>\n    <Footer class=\"mt-5\" />\n  </div>\n</template>\n\n<script>\nimport OrderService from \"@/services/OrderService.js\";\nimport ATopHeader from \"@/components/Admins/ATopHeader.vue\";\nimport Footer from \"@/components/Common/Footer.vue\";\nexport default {\n  name: \"AOrders\",\n  components: {\n    ATopHeader,\n    Footer\n  },\n  data() {\n    return {\n      anyType: {\n        name: \"All\",\n        variant: \"dark\"\n      },\n      selectedTypeName: \"All\",\n      selectedTypeVariant: \"dark\",\n      orders: 0,\n      secondOrderList: null,\n      orderList: null,\n      orderList2: null,\n      orderStatus: [\n        {\n          name: \"paid\",\n          variant: \"dark\"\n        },\n        {\n          name: \"preparing\",\n          variant: \"info\"\n        },\n        {\n          name: \"on the way\",\n          variant: \"warning\"\n        },\n        {\n          name: \"complete\",\n          variant: \"success\"\n        }\n      ],\n      currentPage: 1,\n      perPage: 20\n    };\n  },\n  async mounted() {\n    try {\n      this.orderList = (await OrderService.getOrderList()).data;\n      this.orderList2 = this.orderList.slice();\n      if (this.orderList2) {\n        this.orders = this.orderList2.length;\n        const start = 0;\n        this.secondOrderList = this.orderList2.slice(\n          start,\n          start + this.perPage\n        );\n      }\n    } catch (error) {\n      console.log(error.response.data.error);\n    }\n  },\n  methods: {\n    selectType(status) {\n      if (status.name == \"All\") {\n        this.selectedTypeName = status.name;\n        this.selectedTypeVariant = status.variant;\n        this.orderList2 = this.orderList.slice();\n      } else {\n        this.selectedTypeName = status.name;\n        this.selectedTypeVariant = status.variant;\n        this.orderList2 = this.orderList.filter(\n          obj => obj.status == status.name\n        );\n      }\n      this.orders = this.orderList2.length;\n      const start = 0;\n      this.secondOrderList = this.orderList2.slice(start, start + this.perPage);\n    },\n    async updateStatus(order, status) {\n      const index = this.secondOrderList.findIndex(obj => obj.id === order.id);\n      this.secondOrderList[index].status = status.name;\n      this.secondOrderList[index].variant = status.variant;\n      await OrderService.updateOrder({\n        id: order.id,\n        status: status.name,\n        variant: status.variant\n      });\n    },\n    paginate(currentPage) {\n      const start = (currentPage - 1) * this.perPage;\n      this.secondOrderList = this.orderList2.slice(start, start + this.perPage);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}