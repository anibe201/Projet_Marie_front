{"remainingRequest":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\src\\components\\Checkout\\BuyItem.vue","mtime":1668170115101},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\babel.config.js","mtime":1645609201000},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1665053040434},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664720015241},{"path":"C:\\Users\\AlexisAnohVianneyANI\\Desktop\\emarket-main\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1665053078023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBPcmRlclNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9PcmRlclNlcnZpY2UuanMiOwppbXBvcnQgT3JkZXJJdGVtU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL09yZGVySXRlbVNlcnZpY2UuanMiOwppbXBvcnQgUHJvZHVjdHNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvUHJvZHVjdHNTZXJ2aWNlLmpzIjsKaW1wb3J0IHsgbG9hZFN0cmlwZSB9IGZyb20gIkBzdHJpcGUvc3RyaXBlLWpzIjsKY29uc3Qgc3RyaXBlSW5pdCA9IGxvYWRTdHJpcGUoInBrX3Rlc3RfNTFJNG1iaUdWM21MQVlKZVExM0JDUHR0MGIwRFdNSEFKQUxoZE9hQVZwMnNBNVAwV2dqUGNIMjFaaXc4ZlFwYkJuOGtac05nVDUxM3Q3aHRQQ0Rsd25memgwMGdrWXlsVVYxIik7CmltcG9ydCBDaGVja291dFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9DaGVja291dFNlcnZpY2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJ1eUl0ZW0iLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZXJjZW50OiAwLAogICAgICBvcmRlcjoge30sCiAgICAgIHNlc3Npb246IHt9LAogICAgICB2YWxpZFNlc3Npb246IGZhbHNlLAogICAgICBzZXNzaW9uSWQ6IG51bGwsCiAgICAgIHNlbGVjdGVkQ3VycmVuY3k6ICJGY2ZhIiwKICAgICAgcGF5QnRuU3BpbjogZmFsc2UsCiAgICAgIHN1YlRvdGFsQW1vdW50OiAwLAogICAgICBmb3JtVmFsaWRhdGU6IHRydWUsCiAgICAgIG1lc3NhZ2U6ICJmb3JtIGRhdGEgaXMgbm90IHZhbGlkIiwKICAgICAgc2hpcHBpbmdSYXRlOiB0aGlzLiRzdG9yZS5zdGF0ZS5DaGVja291dC5zaGlwcGluZ1JhdGUsCiAgICAgIHRvdGFsQW1vdW50OiAwLAogICAgICBjaGVja291dFByb2R1Y3Q6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDoge30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2hlY2tvdXRQcm9kdWN0ID0gdGhpcy4kc3RvcmUuc3RhdGUuQ2FydC5jYXJ0UHJvZHVjdHM7CiAgICB2YXIgaTsKICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoZWNrb3V0UHJvZHVjdC5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLnN1YlRvdGFsQW1vdW50ICs9IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLmFtb3VudCAqIHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnF1YW50aXR5OwogICAgfQogICAgdGhpcy50b3RhbEFtb3VudCA9IHRoaXMuc3ViVG90YWxBbW91bnQgKyB0aGlzLnNoaXBwaW5nUmF0ZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGNoZWNrb3V0QXBwbGllZCgpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiQ2hlY2tvdXQvaW5mb3JtYXRpb25WYWxpZGF0ZSIpOwogICAgICBpZiAoIXJlc3BvbnNlKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wYXlCdG5TcGluID0gdHJ1ZTsKICAgICAgY29uc3QgY3VzdG9tZXJOYW1lID0gcmVzcG9uc2UubmFtZTsKICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IHJlc3BvbnNlLmVtYWlsOwogICAgICBjb25zdCBjdXN0b21lclBob25lTm8gPSByZXNwb25zZS5waG9uZU5vOwogICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSByZXNwb25zZS5zaGlwcGluZ0FkZHJlc3M7CiAgICAgIHZhciBpOwogICAgICB2YXIgY2hlY2tvdXRJdGVtcyA9IFtdOwogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGVja291dFByb2R1Y3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgY3VycmVuY3k6ICJGY2ZhIiwKICAgICAgICAgIG5hbWU6IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnRpdGxlLAogICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnByb2R1Y3RJZCwKICAgICAgICAgIGFtb3VudDogdGhpcy5jaGVja291dFByb2R1Y3RbaV0uYW1vdW50ICogMTAwLAogICAgICAgICAgcXVhbnRpdHk6IHRoaXMuY2hlY2tvdXRQcm9kdWN0W2ldLnF1YW50aXR5CiAgICAgICAgfTsKICAgICAgICBjaGVja291dEl0ZW1zLnB1c2gob2JqKTsKICAgICAgfQogICAgICBjaGVja291dEl0ZW1zLnB1c2goewogICAgICAgIG5hbWU6ICJTaGlwcGluZyBDb3N0IiwKICAgICAgICBhbW91bnQ6IHRoaXMuc2hpcHBpbmdSYXRlICogMTAwLAogICAgICAgIGN1cnJlbmN5OiAiRmNmYSIsCiAgICAgICAgcXVhbnRpdHk6IDEKICAgICAgfSk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgY2hlY2tvdXRTZXNzaW9uID0gYXdhaXQgQ2hlY2tvdXRTZXJ2aWNlLmNyZWF0ZUNoZWNrb3V0U2Vzc2lvbih7CiAgICAgICAgICBjaGVja291dFByb2R1Y3Q6IGNoZWNrb3V0SXRlbXMsCiAgICAgICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSwKICAgICAgICAgIGN1c3RvbWVyRW1haWw6IGN1c3RvbWVyRW1haWwsCiAgICAgICAgICBjdXN0b21lclBob25lTm86IGN1c3RvbWVyUGhvbmVObywKICAgICAgICAgIHNoaXBwaW5nQWRkcmVzczogc2hpcHBpbmdBZGRyZXNzCiAgICAgICAgfSk7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coY2hlY2tvdXRTZXNzaW9uKTsKICAgICAgICBjb25zb2xlLmxvZyhjaGVja291dFNlc3Npb24uZGF0YS5pZCk7CiAgICAgICAgY29uc3QgaWRkID0gY2hlY2tvdXRTZXNzaW9uLmRhdGEuaWQ7CiAgICAgICAgY29uc3QgcGF0aCA9IGAvc3VjY2Vzcy1wYXltZW50YDsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGF0aCAhPT0gcGF0aCkgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aCwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpZDogaWRkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gcm91dGVyLnB1c2goeyBwYXRoOiAncmVnaXN0ZXInLCBxdWVyeTogeyBwbGFuOiAncHJpdmF0ZScgfX0pCgogICAgICAgIC8vIHN0cmlwZUluaXQudGhlbihzdHJpcGUgPT4gewogICAgICAgIC8vICAgc3RyaXBlCiAgICAgICAgLy8gICAgIC5yZWRpcmVjdFRvQ2hlY2tvdXQoewogICAgICAgIC8vICAgICAgIHNlc3Npb25JZDogY2hlY2tvdXRTZXNzaW9uLmlkCiAgICAgICAgLy8gICAgIH0pCiAgICAgICAgLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLyB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGNyZWF0ZU9yZGVyKCkgewogICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJDaGVja291dC9pbmZvcm1hdGlvblZhbGlkYXRlIik7CiAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnBheUJ0blNwaW4gPSB0cnVlOwogICAgICBjb25zdCBjdXN0b21lck5hbWUgPSByZXNwb25zZS5uYW1lOwogICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gcmVzcG9uc2UuZW1haWw7CiAgICAgIGNvbnN0IGN1c3RvbWVyUGhvbmVObyA9IHJlc3BvbnNlLnBob25lTm87CiAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHJlc3BvbnNlLnNoaXBwaW5nQWRkcmVzczsKICAgICAgdmFyIGk7CiAgICAgIHZhciBjaGVja291dEl0ZW1zID0gW107CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoZWNrb3V0UHJvZHVjdC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICBjdXJyZW5jeTogIkZjZmEiLAogICAgICAgICAgbmFtZTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0udGl0bGUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucHJvZHVjdElkLAogICAgICAgICAgYW1vdW50OiB0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5hbW91bnQgKiAxMDAsCiAgICAgICAgICBxdWFudGl0eTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucXVhbnRpdHkKICAgICAgICB9OwogICAgICAgIGNoZWNrb3V0SXRlbXMucHVzaChvYmopOwogICAgICB9CiAgICAgIGNoZWNrb3V0SXRlbXMucHVzaCh7CiAgICAgICAgbmFtZTogIlNoaXBwaW5nIENvc3QiLAogICAgICAgIGFtb3VudDogdGhpcy5zaGlwcGluZ1JhdGUgKiAxMDAsCiAgICAgICAgY3VycmVuY3k6ICJGY2ZhIiwKICAgICAgICBxdWFudGl0eTogMQogICAgICB9KTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjaGVja291dFNlc3Npb24gPSBhd2FpdCBDaGVja291dFNlcnZpY2UuY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKHsKICAgICAgICAgIGNoZWNrb3V0UHJvZHVjdDogY2hlY2tvdXRJdGVtcywKICAgICAgICAgIGN1c3RvbWVyTmFtZTogY3VzdG9tZXJOYW1lLAogICAgICAgICAgY3VzdG9tZXJFbWFpbDogY3VzdG9tZXJFbWFpbCwKICAgICAgICAgIGN1c3RvbWVyUGhvbmVObzogY3VzdG9tZXJQaG9uZU5vLAogICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhjaGVja291dFNlc3Npb24pOwogICAgICAgIHRoaXMuc2Vzc2lvbklkID0gY2hlY2tvdXRTZXNzaW9uLmRhdGEuaWQ7CiAgICAgICAgLy8gc3RyaXBlSW5pdC50aGVuKHN0cmlwZSA9PiB7CiAgICAgICAgLy8gICBzdHJpcGUKICAgICAgICAvLyAgICAgLnJlZGlyZWN0VG9DaGVja291dCh7CiAgICAgICAgLy8gICAgICAgc2Vzc2lvbklkOiBjaGVja291dFNlc3Npb24uaWQKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgLy8gICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgICAvLyB2YXIgcHJldmlvdXNPcmRlcjsKICAgICAgLy8gdHJ5IHsKICAgICAgLy8gICBwcmV2aW91c09yZGVyID0gKGF3YWl0IE9yZGVyU2VydmljZS5nZXRPcmRlckJ5U2Vzc2lvbklkKHRoaXMuc2Vzc2lvbklkKSk7CiAgICAgIC8vIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAvLyB9CiAgICAgIC8vIGlmIChwcmV2aW91c09yZGVyID09PSAieWEgcmllbiBsZXMgY2hhbXBpIikgewogICAgICAvLyAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJDYXJ0L2NsZWFyQ2FydCIpOwogICAgICAvLyB9OwoKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnNlc3Npb24gPSBhd2FpdCBDaGVja291dFNlcnZpY2UucmV0cmlldmVDaGVja291dFNlc3Npb24odGhpcy5zZXNzaW9uSWQpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2Vzc2lvbik7CiAgICAgICAgLy8gdGhpcy52YWxpZFNlc3Npb24gPSBPYmplY3Qua2V5cyh0aGlzLnNlc3Npb24pLmxlbmd0aCAhPSAwOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgICAvLyBpZiAoIXRoaXMudmFsaWRTZXNzaW9uKSByZXR1cm47CgogICAgICAvLyBjb25zdCBsaW5lSXRlbXMgPSB0aGlzLnNlc3Npb24ubGluZV9pdGVtcy5kYXRhOwogICAgICAvLyBjb25zdCBzaGlwQ29zdCA9IGxpbmVJdGVtc1tsaW5lSXRlbXMubGVuZ3RoIC0gMV0uYW1vdW50X3RvdGFsOwogICAgICBjb25zdCBzaGlwQ29zdCA9IDA7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5vcmRlciA9IGF3YWl0IE9yZGVyU2VydmljZS5jcmVhdGVPcmRlcih7CiAgICAgICAgICBuYW1lOiBjdXN0b21lck5hbWUsCiAgICAgICAgICBwaG9uZU5vOiBjdXN0b21lclBob25lTm8sCiAgICAgICAgICBlbWFpbDogY3VzdG9tZXJFbWFpbCwKICAgICAgICAgIGFkZHJlc3M6IHNoaXBwaW5nQWRkcmVzcywKICAgICAgICAgIHN0YXR1czogInBhaWQiLAogICAgICAgICAgdmFyaWFudDogImRhcmsiLAogICAgICAgICAgY2hlY2tvdXRTZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLAogICAgICAgICAgLy8gcHJvZHVjdENvc3Q6ICh0aGlzLnNlc3Npb24uYW1vdW50X3RvdGFsIC0gc2hpcENvc3QpIC8gMTAwLAogICAgICAgICAgcHJvZHVjdENvc3Q6IHRoaXMudG90YWxBbW91bnQsCiAgICAgICAgICAvLyBjdXJyZW5jeTogdGhpcy5zZXNzaW9uLmN1cnJlbmN5LnRvVXBwZXJDYXNlKCksCiAgICAgICAgICBjdXJyZW5jeTogdGhpcy5zZWxlY3RlZEN1cnJlbmN5LnRvVXBwZXJDYXNlKCksCiAgICAgICAgICAvLyBzaGlwcGluZ0Nvc3Q6IHNoaXBDb3N0IC8gMTAwCiAgICAgICAgICBzaGlwcGluZ0Nvc3Q6IDAKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgICAgY29uc29sZS5sb2codGhpcy5jaGVja291dFByb2R1Y3QpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyLmRhdGEuaWQpOwogICAgICB2YXIgaTsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hlY2tvdXRQcm9kdWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgcHJvZHVjdElkID0gcGFyc2VJbnQodGhpcy5jaGVja291dFByb2R1Y3RbaV0ucHJvZHVjdElkKTsKICAgICAgICBjb25zb2xlLmxvZyhwYXJzZUludCh0aGlzLmNoZWNrb3V0UHJvZHVjdFtpXS5wcm9kdWN0SWQpKTsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgT3JkZXJJdGVtU2VydmljZS5jcmVhdGVPcmRlckl0ZW0oewogICAgICAgICAgICBxdWFudGl0eTogdGhpcy5jaGVja291dFByb2R1Y3RbaV0ucXVhbnRpdHksCiAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLAogICAgICAgICAgICBPcmRlcklkOiB0aGlzLm9yZGVyLmRhdGEuaWQKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfQogICAgICAgIC8vIHZhciBsaW5lcHJvZHVjdDsKICAgICAgICAvLyB0cnkgewogICAgICAgIC8vICAgbGluZXByb2R1Y3QgPSAoYXdhaXQgUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RTYWxlcyhwcm9kdWN0SWQpKS5kYXRhOwogICAgICAgIC8vIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gdHJ5IHsKICAgICAgICAvLyAgIGF3YWl0IFByb2R1Y3RzU2VydmljZS51cGRhdGVQcm9kdWN0KHsKICAgICAgICAvLyAgICAgaWQ6IHByb2R1Y3RJZCwKICAgICAgICAvLyAgICAgc2FsZXM6IGxpbmVwcm9kdWN0LnNhbGVzICsgbGluZUl0ZW1zW2ldLnF1YW50aXR5CiAgICAgICAgLy8gICB9KTsKICAgICAgICAvLyB9IGNhdGNoIChlcnJvcikgewogICAgICAgIC8vICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcik7CiAgICAgICAgLy8gfQogICAgICB9CgogICAgICBjb25zb2xlLmxvZyh0aGlzLmNoZWNrb3V0UHJvZHVjdCk7CiAgICAgIGNvbnNvbGUubG9nKGNoZWNrb3V0SXRlbXMpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyLmRhdGEpOwogICAgICBjb25zdCBnbG9iYWwgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ2dWV4IikpOwogICAgICBjb25zb2xlLmxvZyhnbG9iYWwuQ3VycmVudFVzZXIudXNlcik7CgogICAgICAvLyBvcGVuTG9hZGluZygpIHsKCiAgICAgIGNvbnN0IGxvYWRpbmcgPSB0aGlzLiR2cy5sb2FkaW5nKHsKICAgICAgICBwZXJjZW50OiB0aGlzLnBlcmNlbnQKICAgICAgfSk7CiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGlmICh0aGlzLnBlcmNlbnQgPCAxMDApIHsKICAgICAgICAgIC8vIGxvYWRpbmcuY2hhbmdlUGVyY2VudChgJHt0aGlzLnBlcmNlbnQgPSB0aGlzLnBlcmNlbnQgKyAxMH0lYCkKICAgICAgICAgIGxvYWRpbmcuY2hhbmdlUGVyY2VudChgJHt0aGlzLnBlcmNlbnQgPSB0aGlzLnBlcmNlbnQgKyA0fSVgKTsKICAgICAgICB9CiAgICAgIH0sIDYwKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJzEwMCUgZmluaXNoJyk7CiAgICAgICAgLy8gdGhpcy5QT1NUX1BST0RVSVQodGhpcy5kYXRhKTsKICAgICAgICBjb25zdCBmYWN0dXJlID0gewogICAgICAgICAgaW5mb1Byb2R1aXQ6IHRoaXMuY2hlY2tvdXRQcm9kdWN0LAogICAgICAgICAgZWxtdDI6IGNoZWNrb3V0SXRlbXMsCiAgICAgICAgICBpbmZvQ29tbWFuZGU6IHRoaXMub3JkZXIuZGF0YSwKICAgICAgICAgIGluZm9Vc2VyOiBnbG9iYWwuQ3VycmVudFVzZXIudXNlcgogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coZmFjdHVyZSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVsbXRGYWN0dXJlIiwgSlNPTi5zdHJpbmdpZnkoZmFjdHVyZSkpOwogICAgICAgIGNvbnN0IHBhdGggPSBgL3N1Y2Nlc3MtcGF5bWVudGA7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09IHBhdGgpIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGgsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgaWQ6ICJDJ2VzdCBPSyIKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgdGhpcy5wZXJjZW50ID0gMDsKICAgICAgfSwgMzAwMCk7CiAgICAgIC8vIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":";AAkJA;AACA;AACA;AAGA;AACA,8BACA,8GACA;AACA;AAEA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;IACA;IACA;MACA,uBACA;IACA;IACA;EACA;EACAC;IACA;MACA,4CACA,+BACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAC;UACAnB;UACAoB;UACAC;UACAC;QACA;QACAC;MACA;MACAA;QACAvB;QACAqB;QACAF;QACAG;MACA;MACA;QACA,wBACA;UACAP;UACAS;UACAC;UACAC;UACAC;QACA,EACA;QACA;QACAC;QACAA;QACA;QACA;QACA,+BACA;UAAAC;UAAAC;YAAAC;UAAA;QAAA;QACA;;QAuCA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAH;MACA;IACA;IAGA;MACA,sCACA,+BACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAT;UACAnB;UACAoB;UACAC;UACAC;QACA;QACAC;MACA;MACAA;QACAvB;QACAqB;QACAF;QACAG;MACA;MACA;QACA,wBACA;UACAP;UACAS;UACAC;UACAC;UACAC;QACA,EACA;QACAC;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAGA;QACA,eACA,6DACA;QACAA;QACA;MACA;QACAA;MACA;MACA;;MAGA;MACA;MACA;MACA;QACA,aACA;UACA5B;UACAgC;UACAC;UACAC;UACAC;UACAC;UACAC;UACA;UACAC;UACA;UACAnB;UACA;UACAoB;QACA,EACA;QACAX;MACA;QACAA;MACA;MAGAA;MACAA;MAEA;MACA;QACA;QACAA;QAEA;UACA;YACAN;YACAkB;YACAC;UACA;QACA;UACAb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;;MAEAA;MACAA;MACAA;MACA;MACAA;;MAGA;;MAEA;QACAzB;MACA;MACA;QACA;UACA;UACAuC;QACA;MACA;MACAC;QACAf;QACA;QACA;UACAgB;UACAC;UACAC;UACAC;QACA;QACAnB;QACAoB;QAEA;QACA,+BACA;UAAAnB;UAAAC;YAAAC;UAAA;QAAA;QAEAW;QACAO;QACA;MACA;MACA;IAKA;EACA;AACA","names":["name","components","data","percent","order","session","validSession","sessionId","selectedCurrency","payBtnSpin","subTotalAmount","formValidate","message","shippingRate","totalAmount","checkoutProduct","computed","mounted","methods","currency","description","amount","quantity","checkoutItems","customerName","customerEmail","customerPhoneNo","shippingAddress","console","path","params","id","phoneNo","email","address","status","variant","checkoutSessionId","productCost","shippingCost","ProductId","OrderId","loading","setTimeout","infoProduit","elmt2","infoCommande","infoUser","localStorage","clearInterval"],"sourceRoot":"src/components/Checkout","sources":["BuyItem.vue"],"sourcesContent":["<template>\n  <div>\n    <b-row>\n      <b-col\n        cols=\"6\"\n        v-for=\"product in checkoutProduct\"\n        :key=\"product.productId\"\n      >\n        <b-card-group deck>\n          <b-card img-top style=\"max-width: 14rem\" class=\"mb-4\">\n            <b-card-img\n              :src=\"product.image\"\n              style=\"max-width: 14rem; max-height: 14rem\"\n              alt=\"Image non trouvée\"\n            />\n            <br />\n            <b-link :to=\"{ path: `/product/${product.productId}` }\">\n              {{ product.title }}\n            </b-link>\n            <br />\n            <small class=\"mt-2\">\n              Prix: {{ product.amount }} {{ product.currency }}\n            </small>\n            <br />\n            <small class=\"mt-2\">Quantité: {{ product.quantity }}</small>\n            <br />\n            <small class=\"mt-2\">\n              Cost: {{ product.amount * product.quantity }}\n              {{ product.currency }}\n            </small>\n          </b-card>\n        </b-card-group>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-5\">\n      <b-col cols=\"2\" />\n      <b-col cols=\"10\">\n        <b-card class=\"mt-5\" v-if=\"subTotalAmount != 0\">\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Prix</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ subTotalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Transport</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ shippingRate }}  Fcfa\n                <!-- {{ selectedCurrency }} -->\n              </b-card-text>\n            </b-col>\n          </b-row>\n          <hr />\n          <b-row>\n            <b-col cols=\"8\">\n              <h5>Totale</h5>\n            </b-col>\n            <b-col cols=\"4\">\n              <b-card-text>\n                {{ totalAmount }} {{ selectedCurrency }}\n              </b-card-text>\n            </b-col>\n          </b-row>\n        </b-card>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <b-alert\n          variant=\"primary\"\n          class=\"mb-0 mt-5 p-1 pl-2\"\n          :show=\"!formValidate\"\n        >\n          {{ message }}\n        </b-alert>\n      </b-col>\n    </b-row>\n    <b-row class=\"mt-4\" v-if=\"subTotalAmount != 0\">\n      <b-col cols=\"5\">\n        <b-button block variant=\"warning\" to=\"/cart-view\">Modifier le panier</b-button>\n      </b-col>\n      <b-col cols=\"2\" />\n      <b-col>\n        <b-button\n          v-if=\"!payBtnSpin\"\n          @click=\"checkoutApplied\"\n          block\n          variant=\"success\"\n        >\n          <b-icon icon=\"cursor-fill\" />\n          Payer en ligne\n        </b-button>\n\n\n\n\n\n\n\n\n\n        <!-- <b-button\n        v-if=\"!payBtnSpin\"\n        @click=\"createOrder()\"\n        block\n        variant=\"success\"\n      >\n        <b-icon icon=\"cursor-fill\" />\n        Payer à la livraison\n      </b-button> -->\n      <b-button\n        @click=\"createOrder()\"\n        block\n        variant=\"success\"\n      >\n        <b-icon icon=\"cursor-fill\" />\n        Payer à la livraison\n      </b-button>\n\n\n\n\n\n\n        <b-button v-if=\"payBtnSpin\" block variant=\"success\">\n          Processing...\n          <b-spinner small variant=\"light\"></b-spinner>\n        </b-button>\n      </b-col>\n    </b-row>\n    <b-row v-if=\"subTotalAmount == 0\">\n      <b-col class=\"text-center\">\n        <h4>Pas de produit à acheter !!!</h4>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport OrderService from \"@/services/OrderService.js\";\nimport OrderItemService from \"@/services/OrderItemService.js\";\nimport ProductsService from \"@/services/ProductsService.js\";\n\n\nimport { loadStripe } from \"@stripe/stripe-js\";\nconst stripeInit = loadStripe(\n  \"pk_test_51I4mbiGV3mLAYJeQ13BCPtt0b0DWMHAJALhdOaAVp2sA5P0WgjPcH21Ziw8fQpbBn8kZsNgT513t7htPCDlwnfzh00gkYylUV1\"\n);\nimport CheckoutService from \"@/services/CheckoutService.js\";\n\nexport default {\n  name: \"BuyItem\",\n  components: {},\n  data() {\n    return {\n      percent: 0,\n      order: {},\n      session: {},\n      validSession: false,\n      sessionId: null,\n\n      selectedCurrency: \"Fcfa\",\n      payBtnSpin: false,\n      subTotalAmount: 0,\n      formValidate: true,\n      message: \"form data is not valid\",\n      shippingRate: this.$store.state.Checkout.shippingRate,\n      totalAmount: 0,\n      checkoutProduct: null\n    };\n  },\n  computed: {},\n  mounted() {\n    this.checkoutProduct = this.$store.state.Cart.cartProducts;\n    var i;\n    for (i = 0; i < this.checkoutProduct.length; i++) {\n      this.subTotalAmount +=\n        this.checkoutProduct[i].amount * this.checkoutProduct[i].quantity;\n    }\n    this.totalAmount = this.subTotalAmount + this.shippingRate;\n  },\n  methods: {\n    async checkoutApplied() {\n      const response = await this.$store.dispatch(\n        \"Checkout/informationValidate\"\n      );\n      if (!response) {\n        this.formValidate = false;\n        return;\n      }\n      this.payBtnSpin = true;\n      const customerName = response.name;\n      const customerEmail = response.email;\n      const customerPhoneNo = response.phoneNo;\n      const shippingAddress = response.shippingAddress;\n      var i;\n      var checkoutItems = [];\n      for (i = 0; i < this.checkoutProduct.length; i++) {\n        var obj = {\n          currency: \"Fcfa\",\n          name: this.checkoutProduct[i].title,\n          description: this.checkoutProduct[i].productId,\n          amount: this.checkoutProduct[i].amount * 100,\n          quantity: this.checkoutProduct[i].quantity\n        };\n        checkoutItems.push(obj);\n      }\n      checkoutItems.push({\n        name: \"Shipping Cost\",\n        amount: this.shippingRate * 100,\n        currency: \"Fcfa\",\n        quantity: 1\n      });\n      try {\n        const checkoutSession = (\n          await CheckoutService.createCheckoutSession({\n            checkoutProduct: checkoutItems,\n            customerName: customerName,\n            customerEmail: customerEmail,\n            customerPhoneNo: customerPhoneNo,\n            shippingAddress: shippingAddress\n          })\n        );\n        // console.log(data);\n        console.log(checkoutSession);\n        console.log(checkoutSession.data.id);\n        const idd = checkoutSession.data.id;\n        const path = `/success-payment`;\n        if (this.$route.path !== path)\n          this.$router.push({ path, params: { id: idd } });\n          // router.push({ path: 'register', query: { plan: 'private' }})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        // stripeInit.then(stripe => {\n        //   stripe\n        //     .redirectToCheckout({\n        //       sessionId: checkoutSession.id\n        //     })\n        //     .catch(function(error) {\n        //       console.error(error);\n        //     });\n        // });\n      } catch (error) {\n        console.log(error.response.data.error);\n      }\n    },\n\n\n    async createOrder() {\n      const response =  this.$store.dispatch(\n        \"Checkout/informationValidate\"\n      );\n      if (!response) {\n          this.formValidate = false;\n        return;\n      }\n      this.payBtnSpin = true;\n      const customerName = response.name;\n      const customerEmail = response.email;\n      const customerPhoneNo = response.phoneNo;\n      const shippingAddress = response.shippingAddress;\n      var i;\n      var checkoutItems = [];\n      for (i = 0; i < this.checkoutProduct.length; i++) {\n        var obj = {\n          currency: \"Fcfa\",\n          name: this.checkoutProduct[i].title,\n          description: this.checkoutProduct[i].productId,\n          amount: this.checkoutProduct[i].amount * 100,\n          quantity: this.checkoutProduct[i].quantity\n        };\n        checkoutItems.push(obj);\n      }\n      checkoutItems.push({\n        name: \"Shipping Cost\",\n        amount: this.shippingRate * 100,\n        currency: \"Fcfa\",\n        quantity: 1\n      });\n      try {\n        const checkoutSession = (\n          await CheckoutService.createCheckoutSession({\n            checkoutProduct: checkoutItems,\n            customerName: customerName,\n            customerEmail: customerEmail,\n            customerPhoneNo: customerPhoneNo,\n            shippingAddress: shippingAddress\n          })\n        );\n        console.log(checkoutSession);\n\n        this.sessionId = checkoutSession.data.id;\n        // stripeInit.then(stripe => {\n        //   stripe\n        //     .redirectToCheckout({\n        //       sessionId: checkoutSession.id\n        //     })\n        //     .catch(function(error) {\n        //       console.error(error);\n        //     });\n        // });\n      } catch (error) {\n        console.log(error);\n      }\n        // var previousOrder;\n        // try {\n        //   previousOrder = (await OrderService.getOrderBySessionId(this.sessionId));\n        // } catch (error) {\n        //   console.log(error);\n        // }\n        // if (previousOrder === \"ya rien les champi\") {\n        //   this.$store.dispatch(\"Cart/clearCart\");\n        // };\n        \n\n    try {\n      this.session = (\n        await CheckoutService.retrieveCheckoutSession(this.sessionId)\n      );\n      console.log(this.session)\n      // this.validSession = Object.keys(this.session).length != 0;\n    } catch (error) {\n      console.log(error);\n    }\n    // if (!this.validSession) return;\n\n    \n    // const lineItems = this.session.line_items.data;\n    // const shipCost = lineItems[lineItems.length - 1].amount_total;\n    const shipCost = 0;\n    try {\n      this.order = (\n        await OrderService.createOrder({\n          name: customerName,\n          phoneNo: customerPhoneNo,\n          email: customerEmail,\n          address: shippingAddress,\n          status: \"paid\",\n          variant: \"dark\",\n          checkoutSessionId: this.sessionId,\n          // productCost: (this.session.amount_total - shipCost) / 100,\n          productCost: this.totalAmount,\n          // currency: this.session.currency.toUpperCase(),\n          currency: this.selectedCurrency.toUpperCase(),\n          // shippingCost: shipCost / 100\n          shippingCost: 0\n        })\n      );\n      console.log(this.order)\n    } catch (error) {\n      console.log(error);\n    }\n\n\n    console.log(this.checkoutProduct)\n    console.log(this.order.data.id);\n\n    var i;\n    for (i = 0; i < this.checkoutProduct.length; i++) {\n      const productId = parseInt(this.checkoutProduct[i].productId);\n      console.log(parseInt(this.checkoutProduct[i].productId));\n\n      try {\n        await OrderItemService.createOrderItem({\n          quantity: this.checkoutProduct[i].quantity,\n          ProductId: productId,\n          OrderId: this.order.data.id\n        });\n      } catch (error) {\n        console.log(error);\n      }\n      // var lineproduct;\n      // try {\n      //   lineproduct = (await ProductsService.getProductSales(productId)).data;\n      // } catch (error) {\n      //   console.log(error.response.data.error);\n      // }\n      // try {\n      //   await ProductsService.updateProduct({\n      //     id: productId,\n      //     sales: lineproduct.sales + lineItems[i].quantity\n      //   });\n      // } catch (error) {\n      //   console.log(error.response.data.error);\n      // }\n    }\n\n        console.log(this.checkoutProduct);\n        console.log(checkoutItems);\n        console.log(this.order.data);\n        const global = JSON.parse(localStorage.getItem(\"vuex\"));\n        console.log(global.CurrentUser.user);\n\n\n      // openLoading() {\n\n          const loading = this.$vs.loading({\n            percent: this.percent\n          })\n          const interval = setInterval(() => {\n            if (this.percent < 100) {\n              // loading.changePercent(`${this.percent = this.percent + 10}%`)\n              loading.changePercent(`${this.percent = this.percent + 4}%`)\n            }\n          }, 60)\n          setTimeout(() => {\n            console.log('100% finish');\n            // this.POST_PRODUIT(this.data);\n            const facture = {\n                    infoProduit: this.checkoutProduct,\n                    elmt2: checkoutItems,\n                    infoCommande: this.order.data,\n                    infoUser: global.CurrentUser.user\n                  }\n                  console.log(facture);\n                  localStorage.setItem(\"elmtFacture\", JSON.stringify(facture))\n                \n            const path = `/success-payment`;\n            if (this.$route.path !== path)\n              this.$router.push({ path, params: { id: \"C'est OK\" } });\n\n            loading.close()\n            clearInterval(interval)\n            this.percent = 0\n          }, 3000)\n        // }\n\n\n\n\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}